{"version":3,"sources":["webpack://QRCodeStyling/webpack/universalModuleDefinition","webpack://QRCodeStyling/./node_modules/canvas/index.js","webpack://QRCodeStyling/./node_modules/canvas/lib/DOMMatrix.js","webpack://QRCodeStyling/./node_modules/canvas/lib/bindings.js","webpack://QRCodeStyling/./node_modules/canvas/lib/canvas.js","webpack://QRCodeStyling/./node_modules/canvas/lib/context2d.js","webpack://QRCodeStyling/./node_modules/canvas/lib/image.js","webpack://QRCodeStyling/./node_modules/canvas/lib/jpegstream.js","webpack://QRCodeStyling/./node_modules/canvas/lib/parse-font.js","webpack://QRCodeStyling/./node_modules/canvas/lib/pdfstream.js","webpack://QRCodeStyling/./node_modules/canvas/lib/pngstream.js","webpack://QRCodeStyling/./node_modules/decompress-response/index.js","webpack://QRCodeStyling/./node_modules/mimic-response/index.js","webpack://QRCodeStyling/./node_modules/canvas/build/Release/canvas.node","webpack://QRCodeStyling/./node_modules/once/once.js","webpack://QRCodeStyling/./node_modules/qrcode-generator/qrcode.js","webpack://QRCodeStyling/./node_modules/simple-concat/index.js","webpack://QRCodeStyling/./node_modules/simple-get/index.js","webpack://QRCodeStyling/./src/tools/merge.ts","webpack://QRCodeStyling/./src/constants/errorCorrectionPercents.ts","webpack://QRCodeStyling/./src/core/QRDot.ts","webpack://QRCodeStyling/./src/constants/dotTypes.ts","webpack://QRCodeStyling/./src/core/QRCornerSquare.ts","webpack://QRCodeStyling/./src/constants/cornerSquareTypes.ts","webpack://QRCodeStyling/./src/core/QRCornerDot.ts","webpack://QRCodeStyling/./src/constants/cornerDotTypes.ts","webpack://QRCodeStyling/./src/core/QRCanvas.ts","webpack://QRCodeStyling/./src/tools/calculateImageSize.ts","webpack://QRCodeStyling/./src/constants/gradientTypes.ts","webpack://QRCodeStyling/./src/constants/qrTypes.ts","webpack://QRCodeStyling/./src/core/QROptions.ts","webpack://QRCodeStyling/./src/constants/errorCorrectionLevels.ts","webpack://QRCodeStyling/./src/tools/sanitizeOptions.ts","webpack://QRCodeStyling/./src/index.ts","webpack://QRCodeStyling/./src/core/QRCodeStyling.ts","webpack://QRCodeStyling/./src/tools/getMode.ts","webpack://QRCodeStyling/./src/constants/modes.ts","webpack://QRCodeStyling/./node_modules/wrappy/wrappy.js","webpack://QRCodeStyling/external \"fs\"","webpack://QRCodeStyling/external \"http\"","webpack://QRCodeStyling/external \"https\"","webpack://QRCodeStyling/external \"path\"","webpack://QRCodeStyling/external \"querystring\"","webpack://QRCodeStyling/external \"stream\"","webpack://QRCodeStyling/external \"url\"","webpack://QRCodeStyling/external \"util\"","webpack://QRCodeStyling/external \"zlib\"","webpack://QRCodeStyling/webpack/bootstrap","webpack://QRCodeStyling/webpack/startup","webpack://QRCodeStyling/webpack/runtime/compat get default export","webpack://QRCodeStyling/webpack/runtime/define property getters","webpack://QRCodeStyling/webpack/runtime/hasOwnProperty shorthand","webpack://QRCodeStyling/webpack/runtime/node module decorator","webpack://QRCodeStyling/webpack/runtime/publicPath"],"names":["root","factory","exports","module","define","amd","this","Canvas","Image","CanvasRenderingContext2D","parseFont","packageJson","bindings","fs","PNGStream","PDFStream","JPEGStream","DOMMatrix","DOMPoint","Context2d","CanvasGradient","CanvasPattern","ImageData","registerFont","src","fontFace","_registerFont","realpathSync","createCanvas","width","height","type","createImageData","array","loadImage","Promise","resolve","reject","image","cleanup","onload","onerror","err","backends","Backends","version","cairoVersion","jpegVersion","gifVersion","replace","undefined","freetypeVersion","rsvgVersion","util","x","y","z","w","TypeError","DEGREE_PER_RAD","Math","PI","RAD_PER_DEGREE","parseTransform","tform","split","init","parsed","length","Error","map","parseFloat","parseMatrix","parseMatrix3d","i","_is2D","_values","Float64Array","tforms","multiply","setNumber2D","setNumber3D","receiver","index","value","newInstance","values","instance","Object","create","prototype","constructor","A","B","dest","j","sum","k","fromMatrix","fromFloat32Array","Float32Array","fromFloat64Array","inspect","custom","depth","options","a","b","c","d","e","f","m11","m12","m13","m14","m21","m22","m23","m31","m32","m33","m34","m41","m42","m43","m44","is2D","isIdentity","toString","join","defineProperties","get","set","v","m24","M33","M41","M42","M44","other","multiplySelf","preMultiplySelf","translate","tx","ty","tz","translateSelf","scale","scaleX","scaleY","scaleZ","originX","originY","originZ","scaleSelf","scale3d","scale3dSelf","rotateFromVector","rotateFromVectorSelf","theta","atan2","rotateSelf","rotate","rotX","rotY","rotZ","s","cos","sin","rotateAxisAngle","angle","rotateAxisAngleSelf","sqrt","t","skewX","sx","skewXSelf","tan","skewY","sy","skewYSelf","flipX","flipY","inverse","invertSelf","setMatrixValue","transformList","temp","transformPoint","point","toFloat32Array","from","toFloat64Array","slice","FORMATS","getContext","contextType","contextAttributes","ctx","_context2d","context","canvas","pngStream","createPNGStream","pdfStream","createPDFStream","jpegStream","createJPEGStream","toDataURL","a1","a2","a3","fn","opts","includes","toLowerCase","quality","max","min","str","setTimeout","toBuffer","buf","CanvasRenderingContext2dInit","CanvasRenderingContext2d","GetSource","SetSource","setSource","img","origSrc","call","_originalSource","defineProperty","val","test","commaI","indexOf","isBase64","lastIndexOf","content","Buffer","concat","res","data","statusCode","isBuffer","configurable","complete","Readable","streamJPEGSync","noop","inherits","_read","self","chunk","emit","push","string","weightRe","RegExp","styleRe","variantRe","stretchRe","sizeFamilyRe","cache","sizeFamily","exec","font","weight","style","stretch","variant","size","unit","family","substr","substring","streamPDFSync","len","palette","Uint8ClampedArray","streamPNGSync","PassThrough","PassThroughStream","zlib","mimicResponse","decompressResponse","response","contentEncoding","headers","isBrotli","createBrotliDecompress","decompress","createUnzip","stream","on","error","code","end","pipe","default","knownProperties","fromStream","toStream","fromProperties","Set","keys","property","bind","process","dlopen","__dirname","wrappy","once","called","apply","arguments","onceStrict","onceError","name","strict","proto","Function","qrcode","typeNumber","errorCorrectionLevel","_typeNumber","_errorCorrectionLevel","QRErrorCorrectionLevel","_modules","_moduleCount","_dataCache","_dataList","_this","makeImpl","maskPattern","moduleCount","modules","Array","row","col","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","pos","QRUtil","getPatternPosition","bits","getBCHTypeNumber","mod","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","maskFunc","getMaskFunction","dark","dataList","rsBlocks","QRRSBlock","getRSBlocks","buffer","qrBitBuffer","put","getMode","getLength","getLengthInBits","write","totalDataCount","dataCount","putBit","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","getBuffer","rsPoly","getErrorCorrectPolynomial","modPoly","qrPolynomial","modIndex","getAt","totalCodeCount","createBytes","addData","mode","newData","qrNumber","qrAlphaNum","qr8BitByte","qrKanji","isDark","getModuleCount","make","minLostPoint","pattern","lostPoint","getLostPoint","getBestMaskPattern","createTableTag","cellSize","margin","qrHtml","createSvgTag","alt","title","text","id","mr","rect","qrSvg","scalable","escapeXml","trim","createDataURL","createImgTag","escaped","charAt","createASCII","r1","r2","p","blocks","blocksLastLineNoMargin","ascii","_createHalfASCII","white","black","line","renderTo2dContext","fillStyle","fillRect","stringToBytes","stringToBytesFuncs","bytes","charCodeAt","createStringToBytes","unicodeData","numChars","unicodeMap","bin","base64DecodeInputStream","read","count","b0","b1","String","fromCharCode","unknownChar","PATTERN_POSITION_TABLE","G15","G18","getBCHDigit","L","M","Q","H","digit","errorCorrectLength","QRMath","gexp","sameCount","darkCount","abs","EXP_TABLE","LOG_TABLE","n","num","shift","_num","glog","ratio","RS_BLOCK_TABLE","qrRSBlock","rsBlock","getRsBlockTable","list","_buffer","_length","bufIndex","bit","_data","strToNum","chatToNum","getCode","_bytes","byteArrayOutputStream","writeByte","off","_str","_pos","_buflen","match","decode","getPixel","gif","_width","_height","pixel","out","writeString","writeShort","raster","getLZWRaster","writeBytes","lzwMinCodeSize","clearCode","endCode","bitLength","table","lzwTable","add","_out","_bitLength","_bitBuffer","byteOut","bitOut","dataIndex","contains","flush","toByteArray","_map","_size","key","gifImage","setPixel","base64","_base64","writeEncoded","encode","padlen","base64EncodeOutputStream","utf8","charcode","toUTF8Array","cb","chunks","simpleGet","http","https","querystring","url","isStream","o","assign","maxRedirects","hostname","port","protocol","auth","path","parse","body","forEach","json","JSON","stringify","form","method","byteLength","accept","toUpperCase","req","request","followRedirects","location","host","resume","tryUnzip","abort","isObject","obj","isArray","mergeDeep","target","sources","source","targetValue","sourceValue","_context","_type","draw","getNeighbor","drawFunction","_drawDot","_drawClassy","_drawClassyRounded","_drawRounded","_drawExtraRounded","_drawSquare","_rotateFigure","rotation","cx","cy","closePath","_basicDot","args","arc","_basicSquare","_basicSideRounded","lineTo","_basicCornerRounded","_basicCornerExtraRounded","_basicCornersRounded","_basicCornersExtraRounded","leftNeighbor","rightNeighbor","topNeighbor","bottomNeighbor","neighborsCount","dotSize","_basicExtraRounded","squareMask","dotMask","_canvas","_options","getCanvas","clear","canvasContext","clearRect","drawQR","qr","minSize","drawImageSize","hideXDots","hideYDots","_qr","_image","imageOptions","qrOptions","coverLevel","imageSize","errorCorrectionPercents","maxHiddenDots","originalHeight","originalWidth","maxHiddenAxisDots","hideDots","ceil","round","calculateImageSize","drawBackground","drawDots","hideBackgroundDots","drawCorners","drawImage","backgroundOptions","gradient","gradientOptions","_createGradient","additionalRotation","colorStops","color","addColorStop","filter","xBeginning","yBeginning","dot","dotsOptions","beginPath","xOffset","yOffset","strokeStyle","fill","cornersSquareSize","cornersDotSize","column","cornersSquareOptions","cornersSquare","cornersDotOptions","cornersDot","dx","dy","dw","dh","createRadialGradient","positiveRotation","x0","y0","x1","y1","createLinearGradient","qrTypes","crossOrigin","sanitizeGradient","newGradient","Number","colorStop","sanitizeOptions","newOptions","Boolean","toPNGBuffer","wrapper","ret","require","__webpack_module_cache__","__webpack_require__","moduleId","loaded","__webpack_modules__","getter","__esModule","definition","enumerable","prop","hasOwnProperty","nmd","paths","children"],"mappings":"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","file":"qr-code-styling.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"QRCodeStyling\"] = factory();\n\telse\n\t\troot[\"QRCodeStyling\"] = factory();\n})(this, function() {\nreturn ","const Canvas = require('./lib/canvas')\nconst Image = require('./lib/image')\nconst CanvasRenderingContext2D = require('./lib/context2d')\nconst parseFont = require('./lib/parse-font')\nconst packageJson = require('./package.json')\nconst bindings = require('./lib/bindings')\nconst fs = require('fs')\nconst PNGStream = require('./lib/pngstream')\nconst PDFStream = require('./lib/pdfstream')\nconst JPEGStream = require('./lib/jpegstream')\nconst DOMMatrix = require('./lib/DOMMatrix').DOMMatrix\nconst DOMPoint = require('./lib/DOMMatrix').DOMPoint\n\nfunction createCanvas (width, height, type) {\n  return new Canvas(width, height, type)\n}\n\nfunction createImageData (array, width, height) {\n  return new bindings.ImageData(array, width, height)\n}\n\nfunction loadImage (src) {\n  return new Promise((resolve, reject) => {\n    const image = new Image()\n\n    function cleanup () {\n      image.onload = null\n      image.onerror = null\n    }\n\n    image.onload = () => { cleanup(); resolve(image) }\n    image.onerror = (err) => { cleanup(); reject(err) }\n\n    image.src = src\n  })\n}\n\n/**\n * Resolve paths for registerFont. Must be called *before* creating a Canvas\n * instance.\n * @param src {string} Path to font file.\n * @param fontFace {{family: string, weight?: string, style?: string}} Object\n * specifying font information. `weight` and `style` default to `\"normal\"`.\n */\nfunction registerFont (src, fontFace) {\n  // TODO this doesn't need to be on Canvas; it should just be a static method\n  // of `bindings`.\n  return Canvas._registerFont(fs.realpathSync(src), fontFace)\n}\n\nmodule.exports = {\n  Canvas,\n  Context2d: CanvasRenderingContext2D, // Legacy/compat export\n  CanvasRenderingContext2D,\n  CanvasGradient: bindings.CanvasGradient,\n  CanvasPattern: bindings.CanvasPattern,\n  Image,\n  ImageData: bindings.ImageData,\n  PNGStream,\n  PDFStream,\n  JPEGStream,\n  DOMMatrix,\n  DOMPoint,\n\n  registerFont,\n  parseFont,\n\n  createCanvas,\n  createImageData,\n  loadImage,\n\n  backends: bindings.Backends,\n\n  /** Library version. */\n  version: packageJson.version,\n  /** Cairo version. */\n  cairoVersion: bindings.cairoVersion,\n  /** jpeglib version. */\n  jpegVersion: bindings.jpegVersion,\n  /** gif_lib version. */\n  gifVersion: bindings.gifVersion ? bindings.gifVersion.replace(/[^.\\d]/g, '') : undefined,\n  /** freetype version. */\n  freetypeVersion: bindings.freetypeVersion,\n  /** rsvg version. */\n  rsvgVersion: bindings.rsvgVersion\n}\n","'use strict'\n\nconst util = require('util')\n\n// DOMMatrix per https://drafts.fxtf.org/geometry/#DOMMatrix\n\nfunction DOMPoint(x, y, z, w) {\n  if (!(this instanceof DOMPoint)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\")\n  }\n\n  if (typeof x === 'object') {\n    w = x.w\n    z = x.z\n    y = x.y\n    x = x.x\n  }\n  this.x = typeof x === 'number' ? x : 0\n  this.y = typeof y === 'number' ? y : 0\n  this.z = typeof z === 'number' ? z : 0\n  this.w = typeof w === 'number' ? w : 1\n}\n\n// Constants to index into _values (col-major)\nconst M11 = 0, M12 = 1, M13 = 2, M14 = 3\nconst M21 = 4, M22 = 5, M23 = 6, M24 = 7\nconst M31 = 8, M32 = 9, M33 = 10, M34 = 11\nconst M41 = 12, M42 = 13, M43 = 14, M44 = 15\n\nconst DEGREE_PER_RAD = 180 / Math.PI\nconst RAD_PER_DEGREE = Math.PI / 180\n\nfunction parseMatrix(init) {\n  var parsed = init.replace(/matrix\\(/, '')\n  parsed = parsed.split(/,/, 7) // 6 + 1 to handle too many params\n  if (parsed.length !== 6) throw new Error(`Failed to parse ${init}`)\n  parsed = parsed.map(parseFloat)\n  return [\n    parsed[0], parsed[1], 0, 0,\n    parsed[2], parsed[3], 0, 0,\n    0, 0, 1, 0,\n    parsed[4], parsed[5], 0, 1\n  ]\n}\n\nfunction parseMatrix3d(init) {\n  var parsed = init.replace(/matrix3d\\(/, '')\n  parsed = parsed.split(/,/, 17) // 16 + 1 to handle too many params\n  if (parsed.length !== 16) throw new Error(`Failed to parse ${init}`)\n  return parsed.map(parseFloat)\n}\n\nfunction parseTransform(tform) {\n  var type = tform.split(/\\(/, 1)[0]\n  switch (type) {\n    case 'matrix':\n      return parseMatrix(tform)\n    case 'matrix3d':\n      return parseMatrix3d(tform)\n    // TODO This is supposed to support any CSS transform value.\n    default:\n      throw new Error(`${type} parsing not implemented`)\n  }\n}\n\nfunction DOMMatrix (init) {\n  if (!(this instanceof DOMMatrix)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\")\n  }\n\n  this._is2D = true\n  this._values = new Float64Array([\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ])\n\n  var i\n\n  if (typeof init === 'string') { // parse CSS transformList\n    if (init === '') return // default identity matrix\n    var tforms = init.split(/\\)\\s+/, 20).map(parseTransform)\n    if (tforms.length === 0) return\n    init = tforms[0]\n    for (i = 1; i < tforms.length; i++) init = multiply(tforms[i], init)\n  }\n\n  i = 0\n  if (init && init.length === 6) {\n    setNumber2D(this, M11, init[i++])\n    setNumber2D(this, M12, init[i++])\n    setNumber2D(this, M21, init[i++])\n    setNumber2D(this, M22, init[i++])\n    setNumber2D(this, M41, init[i++])\n    setNumber2D(this, M42, init[i++])\n  } else if (init && init.length === 16) {\n    setNumber2D(this, M11, init[i++])\n    setNumber2D(this, M12, init[i++])\n    setNumber3D(this, M13, init[i++])\n    setNumber3D(this, M14, init[i++])\n    setNumber2D(this, M21, init[i++])\n    setNumber2D(this, M22, init[i++])\n    setNumber3D(this, M23, init[i++])\n    setNumber3D(this, M24, init[i++])\n    setNumber3D(this, M31, init[i++])\n    setNumber3D(this, M32, init[i++])\n    setNumber3D(this, M33, init[i++])\n    setNumber3D(this, M34, init[i++])\n    setNumber2D(this, M41, init[i++])\n    setNumber2D(this, M42, init[i++])\n    setNumber3D(this, M43, init[i++])\n    setNumber3D(this, M44, init[i])\n  } else if (init !== undefined) {\n    throw new TypeError('Expected string or array.')\n  }\n}\n\nDOMMatrix.fromMatrix = function (init) {\n  if (!(init instanceof DOMMatrix)) throw new TypeError('Expected DOMMatrix')\n  return new DOMMatrix(init._values)\n}\nDOMMatrix.fromFloat32Array = function (init) {\n  if (!(init instanceof Float32Array)) throw new TypeError('Expected Float32Array')\n  return new DOMMatrix(init)\n}\nDOMMatrix.fromFloat64Array = function (init) {\n  if (!(init instanceof Float64Array)) throw new TypeError('Expected Float64Array')\n  return new DOMMatrix(init)\n}\n\n// TODO || is for Node.js pre-v6.6.0\nDOMMatrix.prototype[util.inspect.custom || 'inspect'] = function (depth, options) {\n  if (depth < 0) return '[DOMMatrix]'\n\n  return `DOMMatrix [\n    a: ${this.a}\n    b: ${this.b}\n    c: ${this.c}\n    d: ${this.d}\n    e: ${this.e}\n    f: ${this.f}\n    m11: ${this.m11}\n    m12: ${this.m12}\n    m13: ${this.m13}\n    m14: ${this.m14}\n    m21: ${this.m21}\n    m22: ${this.m22}\n    m23: ${this.m23}\n    m23: ${this.m23}\n    m31: ${this.m31}\n    m32: ${this.m32}\n    m33: ${this.m33}\n    m34: ${this.m34}\n    m41: ${this.m41}\n    m42: ${this.m42}\n    m43: ${this.m43}\n    m44: ${this.m44}\n    is2D: ${this.is2D}\n    isIdentity: ${this.isIdentity} ]`\n}\n\nDOMMatrix.prototype.toString = function () {\n  return this.is2D ?\n    `matrix(${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e}, ${this.f})` :\n    `matrix3d(${this._values.join(', ')})`\n}\n\n/**\n * Checks that `value` is a number and sets the value.\n */\nfunction setNumber2D(receiver, index, value) {\n  if (typeof value !== 'number') throw new TypeError('Expected number')\n  return receiver._values[index] = value\n}\n\n/**\n * Checks that `value` is a number, sets `_is2D = false` if necessary and sets\n * the value.\n */\nfunction setNumber3D(receiver, index, value) {\n  if (typeof value !== 'number') throw new TypeError('Expected number')\n  if (index === M33 || index === M44) {\n    if (value !== 1) receiver._is2D = false\n  } else if (value !== 0) receiver._is2D = false\n  return receiver._values[index] = value\n}\n\nObject.defineProperties(DOMMatrix.prototype, {\n  m11: {get: function () { return this._values[M11] }, set: function (v) { return setNumber2D(this, M11, v) }},\n  m12: {get: function () { return this._values[M12] }, set: function (v) { return setNumber2D(this, M12, v) }},\n  m13: {get: function () { return this._values[M13] }, set: function (v) { return setNumber3D(this, M13, v) }},\n  m14: {get: function () { return this._values[M14] }, set: function (v) { return setNumber3D(this, M14, v) }},\n  m21: {get: function () { return this._values[M21] }, set: function (v) { return setNumber2D(this, M21, v) }},\n  m22: {get: function () { return this._values[M22] }, set: function (v) { return setNumber2D(this, M22, v) }},\n  m23: {get: function () { return this._values[M23] }, set: function (v) { return setNumber3D(this, M23, v) }},\n  m24: {get: function () { return this._values[M24] }, set: function (v) { return setNumber3D(this, M24, v) }},\n  m31: {get: function () { return this._values[M31] }, set: function (v) { return setNumber3D(this, M31, v) }},\n  m32: {get: function () { return this._values[M32] }, set: function (v) { return setNumber3D(this, M32, v) }},\n  m33: {get: function () { return this._values[M33] }, set: function (v) { return setNumber3D(this, M33, v) }},\n  m34: {get: function () { return this._values[M34] }, set: function (v) { return setNumber3D(this, M34, v) }},\n  m41: {get: function () { return this._values[M41] }, set: function (v) { return setNumber2D(this, M41, v) }},\n  m42: {get: function () { return this._values[M42] }, set: function (v) { return setNumber2D(this, M42, v) }},\n  m43: {get: function () { return this._values[M43] }, set: function (v) { return setNumber3D(this, M43, v) }},\n  m44: {get: function () { return this._values[M44] }, set: function (v) { return setNumber3D(this, M44, v) }},\n\n  a: {get: function () { return this.m11 }, set: function (v) { return this.m11 = v }},\n  b: {get: function () { return this.m12 }, set: function (v) { return this.m12 = v }},\n  c: {get: function () { return this.m21 }, set: function (v) { return this.m21 = v }},\n  d: {get: function () { return this.m22 }, set: function (v) { return this.m22 = v }},\n  e: {get: function () { return this.m41 }, set: function (v) { return this.m41 = v }},\n  f: {get: function () { return this.m42 }, set: function (v) { return this.m42 = v }},\n\n  is2D: {get: function () { return this._is2D }}, // read-only\n\n  isIdentity: {\n    get: function () {\n      var values = this._values\n      return values[M11] === 1 && values[M12] === 0 && values[M13] === 0 && values[M14] === 0 &&\n             values[M21] === 0 && values[M22] === 1 && values[M23] === 0 && values[M24] === 0 &&\n             values[M31] === 0 && values[M32] === 0 && values[M33] === 1 && values[M34] === 0 &&\n             values[M41] === 0 && values[M42] === 0 && values[M43] === 0 && values[M44] === 1\n    }\n  }\n})\n\n/**\n * Instantiates a DOMMatrix, bypassing the constructor.\n * @param {Float64Array} values Value to assign to `_values`. This is assigned\n *   without copying (okay because all usages are followed by a  multiply).\n */\nfunction newInstance(values) {\n  var instance = Object.create(DOMMatrix.prototype)\n  instance.constructor = DOMMatrix\n  instance._is2D = true\n  instance._values = values\n  return instance\n}\n\nfunction multiply(A, B) {\n  var dest = new Float64Array(16)\n  for (var i = 0; i < 4; i++) {\n    for (var j = 0; j < 4; j++) {\n      var sum = 0\n      for (var k = 0; k < 4; k++) {\n        sum += A[i * 4 + k] * B[k * 4 + j]\n      }\n      dest[i * 4 + j] = sum\n    }\n  }\n  return dest\n}\n\nDOMMatrix.prototype.multiply = function (other) {\n  return newInstance(this._values).multiplySelf(other)\n}\nDOMMatrix.prototype.multiplySelf = function (other) {\n  this._values = multiply(other._values, this._values)\n  if (!other.is2D) this._is2D = false\n  return this\n}\nDOMMatrix.prototype.preMultiplySelf = function (other) {\n  this._values = multiply(this._values, other._values)\n  if (!other.is2D) this._is2D = false\n  return this\n}\n\nDOMMatrix.prototype.translate = function (tx, ty, tz) {\n  return newInstance(this._values).translateSelf(tx, ty, tz)\n}\nDOMMatrix.prototype.translateSelf = function (tx, ty, tz) {\n  if (typeof tx !== 'number') tx = 0\n  if (typeof ty !== 'number') ty = 0\n  if (typeof tz !== 'number') tz = 0\n  this._values = multiply([\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    tx, ty, tz, 1\n  ], this._values)\n  if (tz !== 0) this._is2D = false\n  return this\n}\n\nDOMMatrix.prototype.scale = function (scaleX, scaleY, scaleZ, originX, originY, originZ) {\n  return newInstance(this._values).scaleSelf(scaleX, scaleY, scaleZ, originX, originY, originZ)\n}\nDOMMatrix.prototype.scale3d = function (scale, originX, originY, originZ) {\n  return newInstance(this._values).scale3dSelf(scale, originX, originY, originZ)\n}\nDOMMatrix.prototype.scale3dSelf = function (scale, originX, originY, originZ) {\n  return this.scaleSelf(scale, scale, scale, originX, originY, originZ)\n}\nDOMMatrix.prototype.scaleSelf = function (scaleX, scaleY, scaleZ, originX, originY, originZ) {\n  // Not redundant with translate's checks because we need to negate the values later.\n  if (typeof originX !== 'number') originX = 0\n  if (typeof originY !== 'number') originY = 0\n  if (typeof originZ !== 'number') originZ = 0\n  this.translateSelf(originX, originY, originZ)\n  if (typeof scaleX !== 'number') scaleX = 1\n  if (typeof scaleY !== 'number') scaleY = scaleX\n  if (typeof scaleZ !== 'number') scaleZ = 1\n  this._values = multiply([\n    scaleX, 0, 0, 0,\n    0, scaleY, 0, 0,\n    0, 0, scaleZ, 0,\n    0, 0, 0, 1\n  ], this._values)\n  this.translateSelf(-originX, -originY, -originZ)\n  if (scaleZ !== 1 || originZ !== 0) this._is2D = false\n  return this\n}\n\nDOMMatrix.prototype.rotateFromVector = function (x, y) {\n  return newInstance(this._values).rotateFromVectorSelf(x, y)\n}\nDOMMatrix.prototype.rotateFromVectorSelf = function (x, y) {\n  if (typeof x !== 'number') x = 0\n  if (typeof y !== 'number') y = 0\n  var theta = (x === 0 && y === 0) ? 0 : Math.atan2(y, x) * DEGREE_PER_RAD\n  return this.rotateSelf(theta)\n}\nDOMMatrix.prototype.rotate = function (rotX, rotY, rotZ) {\n  return newInstance(this._values).rotateSelf(rotX, rotY, rotZ)\n}\nDOMMatrix.prototype.rotateSelf = function (rotX, rotY, rotZ) {\n  if (rotY === undefined && rotZ === undefined) {\n    rotZ = rotX\n    rotX = rotY = 0\n  }\n  if (typeof rotY !== 'number') rotY = 0\n  if (typeof rotZ !== 'number') rotZ = 0\n  if (rotX !== 0 || rotY !== 0) this._is2D = false\n  rotX *= RAD_PER_DEGREE\n  rotY *= RAD_PER_DEGREE\n  rotZ *= RAD_PER_DEGREE\n  var c, s\n  c = Math.cos(rotZ)\n  s = Math.sin(rotZ)\n  this._values = multiply([\n    c, s, 0, 0,\n    -s, c, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values)\n  c = Math.cos(rotY)\n  s = Math.sin(rotY)\n  this._values = multiply([\n    c, 0, -s, 0,\n    0, 1, 0, 0,\n    s, 0, c, 0,\n    0, 0, 0, 1\n  ], this._values)\n  c = Math.cos(rotX)\n  s = Math.sin(rotX)\n  this._values = multiply([\n    1, 0, 0, 0,\n    0, c, s, 0,\n    0, -s, c, 0,\n    0, 0, 0, 1\n  ], this._values)\n  return this\n}\n\nDOMMatrix.prototype.rotateAxisAngle = function (x, y, z, angle) {\n  return newInstance(this._values).rotateAxisAngleSelf(x, y, z, angle)\n}\nDOMMatrix.prototype.rotateAxisAngleSelf = function (x, y, z, angle) {\n  if (typeof x !== 'number') x = 0\n  if (typeof y !== 'number') y = 0\n  if (typeof z !== 'number') z = 0\n  // Normalize axis\n  var length = Math.sqrt(x * x + y * y + z * z)\n  if (length === 0) return this\n  if (length !== 1) {\n    x /= length\n    y /= length\n    z /= length\n  }\n  angle *= RAD_PER_DEGREE\n  var c = Math.cos(angle)\n  var s = Math.sin(angle)\n  var t = 1 - c\n  var tx = t * x\n  var ty = t * y\n  // NB: This is the generic transform. If the axis is a major axis, there are\n  // faster transforms.\n  this._values = multiply([\n    tx * x + c,      tx * y + s * z,  tx * z - s * y,  0,\n    tx * y - s * z,  ty * y + c,      ty * z + s * x,  0,\n    tx * z + s * y,  ty * z - s * x,  t * z * z + c,   0,\n    0,               0,               0,               1\n  ], this._values)\n  if (x !== 0 || y !== 0) this._is2D = false\n  return this\n}\n\nDOMMatrix.prototype.skewX = function (sx) {\n  return newInstance(this._values).skewXSelf(sx)\n}\nDOMMatrix.prototype.skewXSelf = function (sx) {\n  if (typeof sx !== 'number') return this\n  var t = Math.tan(sx * RAD_PER_DEGREE)\n  this._values = multiply([\n    1, 0, 0, 0,\n    t, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values)\n  return this\n}\n\nDOMMatrix.prototype.skewY = function (sy) {\n  return newInstance(this._values).skewYSelf(sy)\n}\nDOMMatrix.prototype.skewYSelf = function (sy) {\n  if (typeof sy !== 'number') return this\n  var t = Math.tan(sy * RAD_PER_DEGREE)\n  this._values = multiply([\n    1, t, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values)\n  return this\n}\n\nDOMMatrix.prototype.flipX = function () { \n  return newInstance(multiply([\n    -1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values))\n}\nDOMMatrix.prototype.flipY = function () {\n  return newInstance(multiply([\n    1, 0, 0, 0,\n    0, -1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values))\n}\n\nDOMMatrix.prototype.inverse = function () {\n  return newInstance(this._values).invertSelf()\n}\nDOMMatrix.prototype.invertSelf = function () {\n  // If not invertible, set all attributes to NaN and is2D to false\n  throw new Error('Not implemented')\n}\n\nDOMMatrix.prototype.setMatrixValue = function (transformList) {\n  var temp = new DOMMatrix(transformList)\n  this._values = temp._values\n  this._is2D = temp._is2D\n  return this\n}\n\nDOMMatrix.prototype.transformPoint = function (point) {\n  point = new DOMPoint(point)\n  var x = point.x\n  var y = point.y\n  var z = point.z\n  var w = point.w\n  var values = this._values\n  var nx = values[M11] * x + values[M21] * y + values[M31] * z + values[M41] * w\n  var ny = values[M12] * x + values[M22] * y + values[M32] * z + values[M42] * w\n  var nz = values[M13] * x + values[M23] * y + values[M33] * z + values[M43] * w\n  var nw = values[M14] * x + values[M24] * y + values[M34] * z + values[M44] * w\n  return new DOMPoint(nx, ny, nz, nw)\n}\n\nDOMMatrix.prototype.toFloat32Array = function () { \n  return Float32Array.from(this._values)\n}\n\nDOMMatrix.prototype.toFloat64Array = function () { \n  return this._values.slice(0)\n}\n\nmodule.exports = {DOMMatrix, DOMPoint}\n","'use strict';\n\nmodule.exports = require('../build/Release/canvas.node');\n","'use strict';\n\n/*!\n * Canvas\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\nconst bindings = require('./bindings')\nconst Canvas = module.exports = bindings.Canvas\nconst Context2d = require('./context2d')\nconst PNGStream = require('./pngstream')\nconst PDFStream = require('./pdfstream')\nconst JPEGStream = require('./jpegstream')\nconst FORMATS = ['image/png', 'image/jpeg']\nconst util = require('util')\n\n// TODO || is for Node.js pre-v6.6.0\nCanvas.prototype[util.inspect.custom || 'inspect'] = function () {\n  return `[Canvas ${this.width}x${this.height}]`\n}\n\nCanvas.prototype.getContext = function (contextType, contextAttributes) {\n  if ('2d' == contextType) {\n    var ctx = this._context2d || (this._context2d = new Context2d(this, contextAttributes));\n    this.context = ctx;\n    ctx.canvas = this;\n    return ctx;\n  }\n};\n\nCanvas.prototype.pngStream =\nCanvas.prototype.createPNGStream = function(options){\n  return new PNGStream(this, options);\n};\n\nCanvas.prototype.pdfStream =\nCanvas.prototype.createPDFStream = function(options){\n  return new PDFStream(this, options);\n};\n\nCanvas.prototype.jpegStream =\nCanvas.prototype.createJPEGStream = function(options){\n  return new JPEGStream(this, options);\n};\n\nCanvas.prototype.toDataURL = function(a1, a2, a3){\n  // valid arg patterns (args -> [type, opts, fn]):\n  // [] -> ['image/png', null, null]\n  // [qual] -> ['image/png', null, null]\n  // [undefined] -> ['image/png', null, null]\n  // ['image/png'] -> ['image/png', null, null]\n  // ['image/png', qual] -> ['image/png', null, null]\n  // [fn] -> ['image/png', null, fn]\n  // [type, fn] -> [type, null, fn]\n  // [undefined, fn] -> ['image/png', null, fn]\n  // ['image/png', qual, fn] -> ['image/png', null, fn]\n  // ['image/jpeg', fn] -> ['image/jpeg', null, fn]\n  // ['image/jpeg', opts, fn] -> ['image/jpeg', opts, fn]\n  // ['image/jpeg', qual, fn] -> ['image/jpeg', {quality: qual}, fn]\n  // ['image/jpeg', undefined, fn] -> ['image/jpeg', null, fn]\n  // ['image/jpeg'] -> ['image/jpeg', null, fn]\n  // ['image/jpeg', opts] -> ['image/jpeg', opts, fn]\n  // ['image/jpeg', qual] -> ['image/jpeg', {quality: qual}, fn]\n\n  var type = 'image/png';\n  var opts = {};\n  var fn;\n\n  if ('function' === typeof a1) {\n    fn = a1;\n  } else {\n    if ('string' === typeof a1 && FORMATS.includes(a1.toLowerCase())) {\n      type = a1.toLowerCase();\n    }\n\n    if ('function' === typeof a2) {\n      fn = a2;\n    } else {\n      if ('object' === typeof a2) {\n        opts = a2;\n      } else if ('number' === typeof a2) {\n        opts = {quality: Math.max(0, Math.min(1, a2))};\n      }\n\n      if ('function' === typeof a3) {\n        fn = a3;\n      } else if (undefined !== a3) {\n        throw new TypeError(typeof a3 + ' is not a function');\n      }\n    }\n  }\n\n  if (this.width === 0 || this.height === 0) {\n    // Per spec, if the bitmap has no pixels, return this string:\n    var str = \"data:,\";\n    if (fn) {\n      setTimeout(() => fn(null, str));\n      return;\n    } else {\n      return str;\n    }\n  }\n\n  if (fn) {\n    this.toBuffer((err, buf) => {\n      if (err) return fn(err);\n      fn(null, `data:${type};base64,${buf.toString('base64')}`);\n    }, type, opts)\n  } else {\n    return `data:${type};base64,${this.toBuffer(type, opts).toString('base64')}`\n  }\n};\n","'use strict'\n\n/*!\n * Canvas - Context2d\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\nconst bindings = require('./bindings')\nconst parseFont = require('./parse-font')\nconst { DOMMatrix } = require('./DOMMatrix')\n\nbindings.CanvasRenderingContext2dInit(DOMMatrix, parseFont)\nmodule.exports = bindings.CanvasRenderingContext2d\n","'use strict';\n\n/*!\n * Canvas - Image\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nconst bindings = require('./bindings')\nconst Image = module.exports = bindings.Image\nconst util = require('util')\n\n// Lazily loaded simple-get\nlet get;\n\nconst {GetSource, SetSource} = bindings;\n\nObject.defineProperty(Image.prototype, 'src', {\n  /**\n   * src setter. Valid values:\n   *  * `data:` URI\n   *  * Local file path\n   *  * HTTP or HTTPS URL\n   *  * Buffer containing image data (i.e. not a `data:` URI stored in a Buffer)\n   *\n   * @param {String|Buffer} val filename, buffer, data URI, URL\n   * @api public\n   */\n  set(val) {\n    if (typeof val === 'string') {\n      if (/^\\s*data:/.test(val)) { // data: URI\n        const commaI = val.indexOf(',')\n        // 'base64' must come before the comma\n        const isBase64 = val.lastIndexOf('base64', commaI) !== -1\n        const content = val.slice(commaI + 1)\n        setSource(this, Buffer.from(content, isBase64 ? 'base64' : 'utf8'), val);\n      } else if (/^\\s*https?:\\/\\//.test(val)) { // remote URL\n        const onerror = err => {\n          if (typeof this.onerror === 'function') {\n            this.onerror(err)\n          } else {\n            throw err\n          }\n        }\n\n        if (!get) get = require('simple-get');\n\n        get.concat(val, (err, res, data) => {\n          if (err) return onerror(err)\n\n          if (res.statusCode < 200 || res.statusCode >= 300) {\n            return onerror(new Error(`Server responded with ${res.statusCode}`))\n          }\n\n          setSource(this, data)\n        })\n      } else { // local file path assumed\n        setSource(this, val);\n      }\n    } else if (Buffer.isBuffer(val)) {\n      setSource(this, val);\n    }\n  },\n\n  get() {\n    // TODO https://github.com/Automattic/node-canvas/issues/118\n    return getSource(this);\n  },\n\n  configurable: true\n});\n\n// TODO || is for Node.js pre-v6.6.0\nImage.prototype[util.inspect.custom || 'inspect'] = function(){\n  return '[Image'\n    + (this.complete ? ':' + this.width + 'x' + this.height : '')\n    + (this.src ? ' ' + this.src : '')\n    + (this.complete ? ' complete' : '')\n    + ']';\n};\n\nfunction getSource(img){\n  return img._originalSource || GetSource.call(img);\n}\n\nfunction setSource(img, src, origSrc){\n  SetSource.call(img, src);\n  img._originalSource = origSrc;\n}\n","'use strict';\n\n/*!\n * Canvas - JPEGStream\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\nvar Readable = require('stream').Readable;\nvar util = require('util');\n\nvar JPEGStream = module.exports = function JPEGStream(canvas, options) {\n  if (!(this instanceof JPEGStream)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\");\n  }\n\n  if (canvas.streamJPEGSync === undefined) {\n    throw new Error(\"node-canvas was built without JPEG support.\");\n  }\n\n  Readable.call(this);\n\n  this.options = options;\n  this.canvas = canvas;\n};\n\nutil.inherits(JPEGStream, Readable);\n\nfunction noop() {}\n\nJPEGStream.prototype._read = function _read() {\n  // For now we're not controlling the c++ code's data emission, so we only\n  // call canvas.streamJPEGSync once and let it emit data at will.\n  this._read = noop;\n  var self = this;\n  self.canvas.streamJPEGSync(this.options, function(err, chunk){\n    if (err) {\n      self.emit('error', err);\n    } else if (chunk) {\n      self.push(chunk);\n    } else {\n      self.push(null);\n    }\n  });\n};\n","'use strict'\n\n/**\n * Font RegExp helpers.\n */\n\nconst weights = 'bold|bolder|lighter|[1-9]00'\n  , styles = 'italic|oblique'\n  , variants = 'small-caps'\n  , stretches = 'ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded'\n  , units = 'px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q'\n  , string = '\\'([^\\']+)\\'|\"([^\"]+)\"|[\\\\w\\\\s-]+'\n\n// [ [ <font-style> || <font-variant-css21> || <font-weight> || <font-stretch> ]?\n//    <font-size> [ / <line-height> ]? <font-family> ]\n// https://drafts.csswg.org/css-fonts-3/#font-prop\nconst weightRe = new RegExp('(' + weights + ') +', 'i')\nconst styleRe = new RegExp('(' + styles + ') +', 'i')\nconst variantRe = new RegExp('(' + variants + ') +', 'i')\nconst stretchRe = new RegExp('(' + stretches + ') +', 'i')\nconst sizeFamilyRe = new RegExp(\n  '([\\\\d\\\\.]+)(' + units + ') *'\n  + '((?:' + string + ')( *, *(?:' + string + '))*)')\n\n/**\n * Cache font parsing.\n */\n\nconst cache = {}\n\nconst defaultHeight = 16 // pt, common browser default\n\n/**\n * Parse font `str`.\n *\n * @param {String} str\n * @return {Object} Parsed font. `size` is in device units. `unit` is the unit\n *   appearing in the input string.\n * @api private\n */\n\nmodule.exports = function (str) {\n  // Cached\n  if (cache[str]) return cache[str]\n\n  // Try for required properties first.\n  const sizeFamily = sizeFamilyRe.exec(str)\n  if (!sizeFamily) return // invalid\n\n  // Default values and required properties\n  const font = {\n    weight: 'normal',\n    style: 'normal',\n    stretch: 'normal',\n    variant: 'normal',\n    size: parseFloat(sizeFamily[1]),\n    unit: sizeFamily[2],\n    family: sizeFamily[3].replace(/[\"']/g, '').replace(/ *, */g, ',')\n  }\n\n  // Optional, unordered properties.\n  let weight, style, variant, stretch\n  // Stop search at `sizeFamily.index`\n  let substr = str.substring(0, sizeFamily.index)\n  if ((weight = weightRe.exec(substr))) font.weight = weight[1]\n  if ((style = styleRe.exec(substr))) font.style = style[1]\n  if ((variant = variantRe.exec(substr))) font.variant = variant[1]\n  if ((stretch = stretchRe.exec(substr))) font.stretch = stretch[1]\n\n  // Convert to device units. (`font.unit` is the original unit)\n  // TODO: ch, ex\n  switch (font.unit) {\n    case 'pt':\n      font.size /= 0.75\n      break\n    case 'pc':\n      font.size *= 16\n      break\n    case 'in':\n      font.size *= 96\n      break\n    case 'cm':\n      font.size *= 96.0 / 2.54\n      break\n    case 'mm':\n      font.size *= 96.0 / 25.4\n      break\n    case '%':\n      // TODO disabled because existing unit tests assume 100\n      // font.size *= defaultHeight / 100 / 0.75\n      break\n    case 'em':\n    case 'rem':\n      font.size *= defaultHeight / 0.75\n      break\n    case 'q':\n      font.size *= 96 / 25.4 / 4\n      break\n  }\n\n  return (cache[str] = font)\n}\n","'use strict';\n\n/*!\n * Canvas - PDFStream\n */\n\nvar Readable = require('stream').Readable;\nvar util = require('util');\n\nvar PDFStream = module.exports = function PDFStream(canvas, options) {\n  if (!(this instanceof PDFStream)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\");\n  }\n\n  Readable.call(this);\n\n  this.canvas = canvas;\n  this.options = options;\n};\n\nutil.inherits(PDFStream, Readable);\n\nfunction noop() {}\n\nPDFStream.prototype._read = function _read() {\n  // For now we're not controlling the c++ code's data emission, so we only\n  // call canvas.streamPDFSync once and let it emit data at will.\n  this._read = noop;\n  var self = this;\n  self.canvas.streamPDFSync(function(err, chunk, len){\n    if (err) {\n      self.emit('error', err);\n    } else if (len) {\n      self.push(chunk);\n    } else {\n      self.push(null);\n    }\n  }, this.options);\n};\n","'use strict';\n\n/*!\n * Canvas - PNGStream\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\nvar Readable = require('stream').Readable;\nvar util = require('util');\n\nvar PNGStream = module.exports = function PNGStream(canvas, options) {\n  if (!(this instanceof PNGStream)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\");\n  }\n\n  Readable.call(this);\n\n  if (options &&\n    options.palette instanceof Uint8ClampedArray &&\n    options.palette.length % 4 !== 0) {\n    throw new Error(\"Palette length must be a multiple of 4.\");\n  }\n  this.canvas = canvas;\n  this.options = options || {};\n};\n\nutil.inherits(PNGStream, Readable);\n\nfunction noop() {}\n\nPNGStream.prototype._read = function _read() {\n  // For now we're not controlling the c++ code's data emission, so we only\n  // call canvas.streamPNGSync once and let it emit data at will.\n  this._read = noop;\n  var self = this;\n  self.canvas.streamPNGSync(function(err, chunk, len){\n    if (err) {\n      self.emit('error', err);\n    } else if (len) {\n      self.push(chunk);\n    } else {\n      self.push(null);\n    }\n  }, self.options);\n};\n","'use strict';\nconst {PassThrough: PassThroughStream} = require('stream');\nconst zlib = require('zlib');\nconst mimicResponse = require('mimic-response');\n\nconst decompressResponse = response => {\n\tconst contentEncoding = (response.headers['content-encoding'] || '').toLowerCase();\n\n\tif (!['gzip', 'deflate', 'br'].includes(contentEncoding)) {\n\t\treturn response;\n\t}\n\n\tconst isBrotli = contentEncoding === 'br';\n\tif (isBrotli && typeof zlib.createBrotliDecompress !== 'function') {\n\t\treturn response;\n\t}\n\n\tconst decompress = isBrotli ? zlib.createBrotliDecompress() : zlib.createUnzip();\n\tconst stream = new PassThroughStream();\n\n\tmimicResponse(response, stream);\n\n\tdecompress.on('error', error => {\n\t\t// Ignore empty response\n\t\tif (error.code === 'Z_BUF_ERROR') {\n\t\t\tstream.end();\n\t\t\treturn;\n\t\t}\n\n\t\tstream.emit('error', error);\n\t});\n\n\tresponse.pipe(decompress).pipe(stream);\n\n\treturn stream;\n};\n\nmodule.exports = decompressResponse;\n// TODO: remove this in the next major version\nmodule.exports.default = decompressResponse;\n","'use strict';\n\n// We define these manually to ensure they're always copied\n// even if they would move up the prototype chain\n// https://nodejs.org/api/http.html#http_class_http_incomingmessage\nconst knownProperties = [\n\t'aborted',\n\t'complete',\n\t'destroy',\n\t'headers',\n\t'httpVersion',\n\t'httpVersionMinor',\n\t'httpVersionMajor',\n\t'method',\n\t'rawHeaders',\n\t'rawTrailers',\n\t'setTimeout',\n\t'socket',\n\t'statusCode',\n\t'statusMessage',\n\t'trailers',\n\t'url'\n];\n\nmodule.exports = (fromStream, toStream) => {\n\tconst fromProperties = new Set(Object.keys(fromStream).concat(knownProperties));\n\n\tfor (const property of fromProperties) {\n\t\t// Don't overwrite existing properties.\n\t\tif (property in toStream) {\n\t\t\tcontinue;\n\t\t}\n\n\t\ttoStream[property] = typeof fromStream[property] === 'function' ? fromStream[property].bind(fromStream) : fromStream[property];\n\t}\n\n\treturn toStream;\n};\n","\ntry {\n  process.dlopen(module, __dirname + require(\"path\").sep + __webpack_public_path__ + \"b42e2126ae090433866d154ff77acdc3.node\");\n} catch (error) {\n  throw new Error('node-loader:\\n' + error);\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","//---------------------------------------------------------------------\n//\n// QR Code Generator for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n// The word 'QR Code' is registered trademark of\n// DENSO WAVE INCORPORATED\n//  http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n\nvar qrcode = function() {\n\n  //---------------------------------------------------------------------\n  // qrcode\n  //---------------------------------------------------------------------\n\n  /**\n   * qrcode\n   * @param typeNumber 1 to 40\n   * @param errorCorrectionLevel 'L','M','Q','H'\n   */\n  var qrcode = function(typeNumber, errorCorrectionLevel) {\n\n    var PAD0 = 0xEC;\n    var PAD1 = 0x11;\n\n    var _typeNumber = typeNumber;\n    var _errorCorrectionLevel = QRErrorCorrectionLevel[errorCorrectionLevel];\n    var _modules = null;\n    var _moduleCount = 0;\n    var _dataCache = null;\n    var _dataList = [];\n\n    var _this = {};\n\n    var makeImpl = function(test, maskPattern) {\n\n      _moduleCount = _typeNumber * 4 + 17;\n      _modules = function(moduleCount) {\n        var modules = new Array(moduleCount);\n        for (var row = 0; row < moduleCount; row += 1) {\n          modules[row] = new Array(moduleCount);\n          for (var col = 0; col < moduleCount; col += 1) {\n            modules[row][col] = null;\n          }\n        }\n        return modules;\n      }(_moduleCount);\n\n      setupPositionProbePattern(0, 0);\n      setupPositionProbePattern(_moduleCount - 7, 0);\n      setupPositionProbePattern(0, _moduleCount - 7);\n      setupPositionAdjustPattern();\n      setupTimingPattern();\n      setupTypeInfo(test, maskPattern);\n\n      if (_typeNumber >= 7) {\n        setupTypeNumber(test);\n      }\n\n      if (_dataCache == null) {\n        _dataCache = createData(_typeNumber, _errorCorrectionLevel, _dataList);\n      }\n\n      mapData(_dataCache, maskPattern);\n    };\n\n    var setupPositionProbePattern = function(row, col) {\n\n      for (var r = -1; r <= 7; r += 1) {\n\n        if (row + r <= -1 || _moduleCount <= row + r) continue;\n\n        for (var c = -1; c <= 7; c += 1) {\n\n          if (col + c <= -1 || _moduleCount <= col + c) continue;\n\n          if ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n              || (0 <= c && c <= 6 && (r == 0 || r == 6) )\n              || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n            _modules[row + r][col + c] = true;\n          } else {\n            _modules[row + r][col + c] = false;\n          }\n        }\n      }\n    };\n\n    var getBestMaskPattern = function() {\n\n      var minLostPoint = 0;\n      var pattern = 0;\n\n      for (var i = 0; i < 8; i += 1) {\n\n        makeImpl(true, i);\n\n        var lostPoint = QRUtil.getLostPoint(_this);\n\n        if (i == 0 || minLostPoint > lostPoint) {\n          minLostPoint = lostPoint;\n          pattern = i;\n        }\n      }\n\n      return pattern;\n    };\n\n    var setupTimingPattern = function() {\n\n      for (var r = 8; r < _moduleCount - 8; r += 1) {\n        if (_modules[r][6] != null) {\n          continue;\n        }\n        _modules[r][6] = (r % 2 == 0);\n      }\n\n      for (var c = 8; c < _moduleCount - 8; c += 1) {\n        if (_modules[6][c] != null) {\n          continue;\n        }\n        _modules[6][c] = (c % 2 == 0);\n      }\n    };\n\n    var setupPositionAdjustPattern = function() {\n\n      var pos = QRUtil.getPatternPosition(_typeNumber);\n\n      for (var i = 0; i < pos.length; i += 1) {\n\n        for (var j = 0; j < pos.length; j += 1) {\n\n          var row = pos[i];\n          var col = pos[j];\n\n          if (_modules[row][col] != null) {\n            continue;\n          }\n\n          for (var r = -2; r <= 2; r += 1) {\n\n            for (var c = -2; c <= 2; c += 1) {\n\n              if (r == -2 || r == 2 || c == -2 || c == 2\n                  || (r == 0 && c == 0) ) {\n                _modules[row + r][col + c] = true;\n              } else {\n                _modules[row + r][col + c] = false;\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var setupTypeNumber = function(test) {\n\n      var bits = QRUtil.getBCHTypeNumber(_typeNumber);\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;\n      }\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n      }\n    };\n\n    var setupTypeInfo = function(test, maskPattern) {\n\n      var data = (_errorCorrectionLevel << 3) | maskPattern;\n      var bits = QRUtil.getBCHTypeInfo(data);\n\n      // vertical\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 6) {\n          _modules[i][8] = mod;\n        } else if (i < 8) {\n          _modules[i + 1][8] = mod;\n        } else {\n          _modules[_moduleCount - 15 + i][8] = mod;\n        }\n      }\n\n      // horizontal\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 8) {\n          _modules[8][_moduleCount - i - 1] = mod;\n        } else if (i < 9) {\n          _modules[8][15 - i - 1 + 1] = mod;\n        } else {\n          _modules[8][15 - i - 1] = mod;\n        }\n      }\n\n      // fixed module\n      _modules[_moduleCount - 8][8] = (!test);\n    };\n\n    var mapData = function(data, maskPattern) {\n\n      var inc = -1;\n      var row = _moduleCount - 1;\n      var bitIndex = 7;\n      var byteIndex = 0;\n      var maskFunc = QRUtil.getMaskFunction(maskPattern);\n\n      for (var col = _moduleCount - 1; col > 0; col -= 2) {\n\n        if (col == 6) col -= 1;\n\n        while (true) {\n\n          for (var c = 0; c < 2; c += 1) {\n\n            if (_modules[row][col - c] == null) {\n\n              var dark = false;\n\n              if (byteIndex < data.length) {\n                dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n              }\n\n              var mask = maskFunc(row, col - c);\n\n              if (mask) {\n                dark = !dark;\n              }\n\n              _modules[row][col - c] = dark;\n              bitIndex -= 1;\n\n              if (bitIndex == -1) {\n                byteIndex += 1;\n                bitIndex = 7;\n              }\n            }\n          }\n\n          row += inc;\n\n          if (row < 0 || _moduleCount <= row) {\n            row -= inc;\n            inc = -inc;\n            break;\n          }\n        }\n      }\n    };\n\n    var createBytes = function(buffer, rsBlocks) {\n\n      var offset = 0;\n\n      var maxDcCount = 0;\n      var maxEcCount = 0;\n\n      var dcdata = new Array(rsBlocks.length);\n      var ecdata = new Array(rsBlocks.length);\n\n      for (var r = 0; r < rsBlocks.length; r += 1) {\n\n        var dcCount = rsBlocks[r].dataCount;\n        var ecCount = rsBlocks[r].totalCount - dcCount;\n\n        maxDcCount = Math.max(maxDcCount, dcCount);\n        maxEcCount = Math.max(maxEcCount, ecCount);\n\n        dcdata[r] = new Array(dcCount);\n\n        for (var i = 0; i < dcdata[r].length; i += 1) {\n          dcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];\n        }\n        offset += dcCount;\n\n        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n        var rawPoly = qrPolynomial(dcdata[r], rsPoly.getLength() - 1);\n\n        var modPoly = rawPoly.mod(rsPoly);\n        ecdata[r] = new Array(rsPoly.getLength() - 1);\n        for (var i = 0; i < ecdata[r].length; i += 1) {\n          var modIndex = i + modPoly.getLength() - ecdata[r].length;\n          ecdata[r][i] = (modIndex >= 0)? modPoly.getAt(modIndex) : 0;\n        }\n      }\n\n      var totalCodeCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalCodeCount += rsBlocks[i].totalCount;\n      }\n\n      var data = new Array(totalCodeCount);\n      var index = 0;\n\n      for (var i = 0; i < maxDcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < dcdata[r].length) {\n            data[index] = dcdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      for (var i = 0; i < maxEcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < ecdata[r].length) {\n            data[index] = ecdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      return data;\n    };\n\n    var createData = function(typeNumber, errorCorrectionLevel, dataList) {\n\n      var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectionLevel);\n\n      var buffer = qrBitBuffer();\n\n      for (var i = 0; i < dataList.length; i += 1) {\n        var data = dataList[i];\n        buffer.put(data.getMode(), 4);\n        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n        data.write(buffer);\n      }\n\n      // calc num max data.\n      var totalDataCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalDataCount += rsBlocks[i].dataCount;\n      }\n\n      if (buffer.getLengthInBits() > totalDataCount * 8) {\n        throw 'code length overflow. ('\n          + buffer.getLengthInBits()\n          + '>'\n          + totalDataCount * 8\n          + ')';\n      }\n\n      // end code\n      if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n        buffer.put(0, 4);\n      }\n\n      // padding\n      while (buffer.getLengthInBits() % 8 != 0) {\n        buffer.putBit(false);\n      }\n\n      // padding\n      while (true) {\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD0, 8);\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD1, 8);\n      }\n\n      return createBytes(buffer, rsBlocks);\n    };\n\n    _this.addData = function(data, mode) {\n\n      mode = mode || 'Byte';\n\n      var newData = null;\n\n      switch(mode) {\n      case 'Numeric' :\n        newData = qrNumber(data);\n        break;\n      case 'Alphanumeric' :\n        newData = qrAlphaNum(data);\n        break;\n      case 'Byte' :\n        newData = qr8BitByte(data);\n        break;\n      case 'Kanji' :\n        newData = qrKanji(data);\n        break;\n      default :\n        throw 'mode:' + mode;\n      }\n\n      _dataList.push(newData);\n      _dataCache = null;\n    };\n\n    _this.isDark = function(row, col) {\n      if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {\n        throw row + ',' + col;\n      }\n      return _modules[row][col];\n    };\n\n    _this.getModuleCount = function() {\n      return _moduleCount;\n    };\n\n    _this.make = function() {\n      if (_typeNumber < 1) {\n        var typeNumber = 1;\n\n        for (; typeNumber < 40; typeNumber++) {\n          var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, _errorCorrectionLevel);\n          var buffer = qrBitBuffer();\n\n          for (var i = 0; i < _dataList.length; i++) {\n            var data = _dataList[i];\n            buffer.put(data.getMode(), 4);\n            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n            data.write(buffer);\n          }\n\n          var totalDataCount = 0;\n          for (var i = 0; i < rsBlocks.length; i++) {\n            totalDataCount += rsBlocks[i].dataCount;\n          }\n\n          if (buffer.getLengthInBits() <= totalDataCount * 8) {\n            break;\n          }\n        }\n\n        _typeNumber = typeNumber;\n      }\n\n      makeImpl(false, getBestMaskPattern() );\n    };\n\n    _this.createTableTag = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var qrHtml = '';\n\n      qrHtml += '<table style=\"';\n      qrHtml += ' border-width: 0px; border-style: none;';\n      qrHtml += ' border-collapse: collapse;';\n      qrHtml += ' padding: 0px; margin: ' + margin + 'px;';\n      qrHtml += '\">';\n      qrHtml += '<tbody>';\n\n      for (var r = 0; r < _this.getModuleCount(); r += 1) {\n\n        qrHtml += '<tr>';\n\n        for (var c = 0; c < _this.getModuleCount(); c += 1) {\n          qrHtml += '<td style=\"';\n          qrHtml += ' border-width: 0px; border-style: none;';\n          qrHtml += ' border-collapse: collapse;';\n          qrHtml += ' padding: 0px; margin: 0px;';\n          qrHtml += ' width: ' + cellSize + 'px;';\n          qrHtml += ' height: ' + cellSize + 'px;';\n          qrHtml += ' background-color: ';\n          qrHtml += _this.isDark(r, c)? '#000000' : '#ffffff';\n          qrHtml += ';';\n          qrHtml += '\"/>';\n        }\n\n        qrHtml += '</tr>';\n      }\n\n      qrHtml += '</tbody>';\n      qrHtml += '</table>';\n\n      return qrHtml;\n    };\n\n    _this.createSvgTag = function(cellSize, margin, alt, title) {\n\n      var opts = {};\n      if (typeof arguments[0] == 'object') {\n        // Called by options.\n        opts = arguments[0];\n        // overwrite cellSize and margin.\n        cellSize = opts.cellSize;\n        margin = opts.margin;\n        alt = opts.alt;\n        title = opts.title;\n      }\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      // Compose alt property surrogate\n      alt = (typeof alt === 'string') ? {text: alt} : alt || {};\n      alt.text = alt.text || null;\n      alt.id = (alt.text) ? alt.id || 'qrcode-description' : null;\n\n      // Compose title property surrogate\n      title = (typeof title === 'string') ? {text: title} : title || {};\n      title.text = title.text || null;\n      title.id = (title.text) ? title.id || 'qrcode-title' : null;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var c, mc, r, mr, qrSvg='', rect;\n\n      rect = 'l' + cellSize + ',0 0,' + cellSize +\n        ' -' + cellSize + ',0 0,-' + cellSize + 'z ';\n\n      qrSvg += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"';\n      qrSvg += !opts.scalable ? ' width=\"' + size + 'px\" height=\"' + size + 'px\"' : '';\n      qrSvg += ' viewBox=\"0 0 ' + size + ' ' + size + '\" ';\n      qrSvg += ' preserveAspectRatio=\"xMinYMin meet\"';\n      qrSvg += (title.text || alt.text) ? ' role=\"img\" aria-labelledby=\"' +\n          escapeXml([title.id, alt.id].join(' ').trim() ) + '\"' : '';\n      qrSvg += '>';\n      qrSvg += (title.text) ? '<title id=\"' + escapeXml(title.id) + '\">' +\n          escapeXml(title.text) + '</title>' : '';\n      qrSvg += (alt.text) ? '<description id=\"' + escapeXml(alt.id) + '\">' +\n          escapeXml(alt.text) + '</description>' : '';\n      qrSvg += '<rect width=\"100%\" height=\"100%\" fill=\"white\" cx=\"0\" cy=\"0\"/>';\n      qrSvg += '<path d=\"';\n\n      for (r = 0; r < _this.getModuleCount(); r += 1) {\n        mr = r * cellSize + margin;\n        for (c = 0; c < _this.getModuleCount(); c += 1) {\n          if (_this.isDark(r, c) ) {\n            mc = c*cellSize+margin;\n            qrSvg += 'M' + mc + ',' + mr + rect;\n          }\n        }\n      }\n\n      qrSvg += '\" stroke=\"transparent\" fill=\"black\"/>';\n      qrSvg += '</svg>';\n\n      return qrSvg;\n    };\n\n    _this.createDataURL = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      return createDataURL(size, size, function(x, y) {\n        if (min <= x && x < max && min <= y && y < max) {\n          var c = Math.floor( (x - min) / cellSize);\n          var r = Math.floor( (y - min) / cellSize);\n          return _this.isDark(r, c)? 0 : 1;\n        } else {\n          return 1;\n        }\n      } );\n    };\n\n    _this.createImgTag = function(cellSize, margin, alt) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n\n      var img = '';\n      img += '<img';\n      img += '\\u0020src=\"';\n      img += _this.createDataURL(cellSize, margin);\n      img += '\"';\n      img += '\\u0020width=\"';\n      img += size;\n      img += '\"';\n      img += '\\u0020height=\"';\n      img += size;\n      img += '\"';\n      if (alt) {\n        img += '\\u0020alt=\"';\n        img += escapeXml(alt);\n        img += '\"';\n      }\n      img += '/>';\n\n      return img;\n    };\n\n    var escapeXml = function(s) {\n      var escaped = '';\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charAt(i);\n        switch(c) {\n        case '<': escaped += '&lt;'; break;\n        case '>': escaped += '&gt;'; break;\n        case '&': escaped += '&amp;'; break;\n        case '\"': escaped += '&quot;'; break;\n        default : escaped += c; break;\n        }\n      }\n      return escaped;\n    };\n\n    var _createHalfASCII = function(margin) {\n      var cellSize = 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r1, r2, p;\n\n      var blocks = {\n        '': '',\n        ' ': '',\n        ' ': '',\n        '  ': ' '\n      };\n\n      var blocksLastLineNoMargin = {\n        '': '',\n        ' ': '',\n        ' ': ' ',\n        '  ': ' '\n      };\n\n      var ascii = '';\n      for (y = 0; y < size; y += 2) {\n        r1 = Math.floor((y - min) / cellSize);\n        r2 = Math.floor((y + 1 - min) / cellSize);\n        for (x = 0; x < size; x += 1) {\n          p = '';\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r1, Math.floor((x - min) / cellSize))) {\n            p = ' ';\n          }\n\n          if (min <= x && x < max && min <= y+1 && y+1 < max && _this.isDark(r2, Math.floor((x - min) / cellSize))) {\n            p += ' ';\n          }\n          else {\n            p += '';\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          ascii += (margin < 1 && y+1 >= max) ? blocksLastLineNoMargin[p] : blocks[p];\n        }\n\n        ascii += '\\n';\n      }\n\n      if (size % 2 && margin > 0) {\n        return ascii.substring(0, ascii.length - size - 1) + Array(size+1).join('');\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.createASCII = function(cellSize, margin) {\n      cellSize = cellSize || 1;\n\n      if (cellSize < 2) {\n        return _createHalfASCII(margin);\n      }\n\n      cellSize -= 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r, p;\n\n      var white = Array(cellSize+1).join('');\n      var black = Array(cellSize+1).join('  ');\n\n      var ascii = '';\n      var line = '';\n      for (y = 0; y < size; y += 1) {\n        r = Math.floor( (y - min) / cellSize);\n        line = '';\n        for (x = 0; x < size; x += 1) {\n          p = 1;\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r, Math.floor((x - min) / cellSize))) {\n            p = 0;\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          line += p ? white : black;\n        }\n\n        for (r = 0; r < cellSize; r += 1) {\n          ascii += line + '\\n';\n        }\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.renderTo2dContext = function(context, cellSize) {\n      cellSize = cellSize || 2;\n      var length = _this.getModuleCount();\n      for (var row = 0; row < length; row++) {\n        for (var col = 0; col < length; col++) {\n          context.fillStyle = _this.isDark(row, col) ? 'black' : 'white';\n          context.fillRect(row * cellSize, col * cellSize, cellSize, cellSize);\n        }\n      }\n    }\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrcode.stringToBytes\n  //---------------------------------------------------------------------\n\n  qrcode.stringToBytesFuncs = {\n    'default' : function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        bytes.push(c & 0xff);\n      }\n      return bytes;\n    }\n  };\n\n  qrcode.stringToBytes = qrcode.stringToBytesFuncs['default'];\n\n  //---------------------------------------------------------------------\n  // qrcode.createStringToBytes\n  //---------------------------------------------------------------------\n\n  /**\n   * @param unicodeData base64 string of byte array.\n   * [16bit Unicode],[16bit Bytes], ...\n   * @param numChars\n   */\n  qrcode.createStringToBytes = function(unicodeData, numChars) {\n\n    // create conversion map.\n\n    var unicodeMap = function() {\n\n      var bin = base64DecodeInputStream(unicodeData);\n      var read = function() {\n        var b = bin.read();\n        if (b == -1) throw 'eof';\n        return b;\n      };\n\n      var count = 0;\n      var unicodeMap = {};\n      while (true) {\n        var b0 = bin.read();\n        if (b0 == -1) break;\n        var b1 = read();\n        var b2 = read();\n        var b3 = read();\n        var k = String.fromCharCode( (b0 << 8) | b1);\n        var v = (b2 << 8) | b3;\n        unicodeMap[k] = v;\n        count += 1;\n      }\n      if (count != numChars) {\n        throw count + ' != ' + numChars;\n      }\n\n      return unicodeMap;\n    }();\n\n    var unknownChar = '?'.charCodeAt(0);\n\n    return function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        if (c < 128) {\n          bytes.push(c);\n        } else {\n          var b = unicodeMap[s.charAt(i)];\n          if (typeof b == 'number') {\n            if ( (b & 0xff) == b) {\n              // 1byte\n              bytes.push(b);\n            } else {\n              // 2bytes\n              bytes.push(b >>> 8);\n              bytes.push(b & 0xff);\n            }\n          } else {\n            bytes.push(unknownChar);\n          }\n        }\n      }\n      return bytes;\n    };\n  };\n\n  //---------------------------------------------------------------------\n  // QRMode\n  //---------------------------------------------------------------------\n\n  var QRMode = {\n    MODE_NUMBER :    1 << 0,\n    MODE_ALPHA_NUM : 1 << 1,\n    MODE_8BIT_BYTE : 1 << 2,\n    MODE_KANJI :     1 << 3\n  };\n\n  //---------------------------------------------------------------------\n  // QRErrorCorrectionLevel\n  //---------------------------------------------------------------------\n\n  var QRErrorCorrectionLevel = {\n    L : 1,\n    M : 0,\n    Q : 3,\n    H : 2\n  };\n\n  //---------------------------------------------------------------------\n  // QRMaskPattern\n  //---------------------------------------------------------------------\n\n  var QRMaskPattern = {\n    PATTERN000 : 0,\n    PATTERN001 : 1,\n    PATTERN010 : 2,\n    PATTERN011 : 3,\n    PATTERN100 : 4,\n    PATTERN101 : 5,\n    PATTERN110 : 6,\n    PATTERN111 : 7\n  };\n\n  //---------------------------------------------------------------------\n  // QRUtil\n  //---------------------------------------------------------------------\n\n  var QRUtil = function() {\n\n    var PATTERN_POSITION_TABLE = [\n      [],\n      [6, 18],\n      [6, 22],\n      [6, 26],\n      [6, 30],\n      [6, 34],\n      [6, 22, 38],\n      [6, 24, 42],\n      [6, 26, 46],\n      [6, 28, 50],\n      [6, 30, 54],\n      [6, 32, 58],\n      [6, 34, 62],\n      [6, 26, 46, 66],\n      [6, 26, 48, 70],\n      [6, 26, 50, 74],\n      [6, 30, 54, 78],\n      [6, 30, 56, 82],\n      [6, 30, 58, 86],\n      [6, 34, 62, 90],\n      [6, 28, 50, 72, 94],\n      [6, 26, 50, 74, 98],\n      [6, 30, 54, 78, 102],\n      [6, 28, 54, 80, 106],\n      [6, 32, 58, 84, 110],\n      [6, 30, 58, 86, 114],\n      [6, 34, 62, 90, 118],\n      [6, 26, 50, 74, 98, 122],\n      [6, 30, 54, 78, 102, 126],\n      [6, 26, 52, 78, 104, 130],\n      [6, 30, 56, 82, 108, 134],\n      [6, 34, 60, 86, 112, 138],\n      [6, 30, 58, 86, 114, 142],\n      [6, 34, 62, 90, 118, 146],\n      [6, 30, 54, 78, 102, 126, 150],\n      [6, 24, 50, 76, 102, 128, 154],\n      [6, 28, 54, 80, 106, 132, 158],\n      [6, 32, 58, 84, 110, 136, 162],\n      [6, 26, 54, 82, 110, 138, 166],\n      [6, 30, 58, 86, 114, 142, 170]\n    ];\n    var G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0);\n    var G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0);\n    var G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1);\n\n    var _this = {};\n\n    var getBCHDigit = function(data) {\n      var digit = 0;\n      while (data != 0) {\n        digit += 1;\n        data >>>= 1;\n      }\n      return digit;\n    };\n\n    _this.getBCHTypeInfo = function(data) {\n      var d = data << 10;\n      while (getBCHDigit(d) - getBCHDigit(G15) >= 0) {\n        d ^= (G15 << (getBCHDigit(d) - getBCHDigit(G15) ) );\n      }\n      return ( (data << 10) | d) ^ G15_MASK;\n    };\n\n    _this.getBCHTypeNumber = function(data) {\n      var d = data << 12;\n      while (getBCHDigit(d) - getBCHDigit(G18) >= 0) {\n        d ^= (G18 << (getBCHDigit(d) - getBCHDigit(G18) ) );\n      }\n      return (data << 12) | d;\n    };\n\n    _this.getPatternPosition = function(typeNumber) {\n      return PATTERN_POSITION_TABLE[typeNumber - 1];\n    };\n\n    _this.getMaskFunction = function(maskPattern) {\n\n      switch (maskPattern) {\n\n      case QRMaskPattern.PATTERN000 :\n        return function(i, j) { return (i + j) % 2 == 0; };\n      case QRMaskPattern.PATTERN001 :\n        return function(i, j) { return i % 2 == 0; };\n      case QRMaskPattern.PATTERN010 :\n        return function(i, j) { return j % 3 == 0; };\n      case QRMaskPattern.PATTERN011 :\n        return function(i, j) { return (i + j) % 3 == 0; };\n      case QRMaskPattern.PATTERN100 :\n        return function(i, j) { return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0; };\n      case QRMaskPattern.PATTERN101 :\n        return function(i, j) { return (i * j) % 2 + (i * j) % 3 == 0; };\n      case QRMaskPattern.PATTERN110 :\n        return function(i, j) { return ( (i * j) % 2 + (i * j) % 3) % 2 == 0; };\n      case QRMaskPattern.PATTERN111 :\n        return function(i, j) { return ( (i * j) % 3 + (i + j) % 2) % 2 == 0; };\n\n      default :\n        throw 'bad maskPattern:' + maskPattern;\n      }\n    };\n\n    _this.getErrorCorrectPolynomial = function(errorCorrectLength) {\n      var a = qrPolynomial([1], 0);\n      for (var i = 0; i < errorCorrectLength; i += 1) {\n        a = a.multiply(qrPolynomial([1, QRMath.gexp(i)], 0) );\n      }\n      return a;\n    };\n\n    _this.getLengthInBits = function(mode, type) {\n\n      if (1 <= type && type < 10) {\n\n        // 1 - 9\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 10;\n        case QRMode.MODE_ALPHA_NUM : return 9;\n        case QRMode.MODE_8BIT_BYTE : return 8;\n        case QRMode.MODE_KANJI     : return 8;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 27) {\n\n        // 10 - 26\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 12;\n        case QRMode.MODE_ALPHA_NUM : return 11;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 10;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 41) {\n\n        // 27 - 40\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 14;\n        case QRMode.MODE_ALPHA_NUM : return 13;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 12;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else {\n        throw 'type:' + type;\n      }\n    };\n\n    _this.getLostPoint = function(qrcode) {\n\n      var moduleCount = qrcode.getModuleCount();\n\n      var lostPoint = 0;\n\n      // LEVEL1\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount; col += 1) {\n\n          var sameCount = 0;\n          var dark = qrcode.isDark(row, col);\n\n          for (var r = -1; r <= 1; r += 1) {\n\n            if (row + r < 0 || moduleCount <= row + r) {\n              continue;\n            }\n\n            for (var c = -1; c <= 1; c += 1) {\n\n              if (col + c < 0 || moduleCount <= col + c) {\n                continue;\n              }\n\n              if (r == 0 && c == 0) {\n                continue;\n              }\n\n              if (dark == qrcode.isDark(row + r, col + c) ) {\n                sameCount += 1;\n              }\n            }\n          }\n\n          if (sameCount > 5) {\n            lostPoint += (3 + sameCount - 5);\n          }\n        }\n      };\n\n      // LEVEL2\n\n      for (var row = 0; row < moduleCount - 1; row += 1) {\n        for (var col = 0; col < moduleCount - 1; col += 1) {\n          var count = 0;\n          if (qrcode.isDark(row, col) ) count += 1;\n          if (qrcode.isDark(row + 1, col) ) count += 1;\n          if (qrcode.isDark(row, col + 1) ) count += 1;\n          if (qrcode.isDark(row + 1, col + 1) ) count += 1;\n          if (count == 0 || count == 4) {\n            lostPoint += 3;\n          }\n        }\n      }\n\n      // LEVEL3\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount - 6; col += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row, col + 1)\n              &&  qrcode.isDark(row, col + 2)\n              &&  qrcode.isDark(row, col + 3)\n              &&  qrcode.isDark(row, col + 4)\n              && !qrcode.isDark(row, col + 5)\n              &&  qrcode.isDark(row, col + 6) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount - 6; row += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row + 1, col)\n              &&  qrcode.isDark(row + 2, col)\n              &&  qrcode.isDark(row + 3, col)\n              &&  qrcode.isDark(row + 4, col)\n              && !qrcode.isDark(row + 5, col)\n              &&  qrcode.isDark(row + 6, col) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      // LEVEL4\n\n      var darkCount = 0;\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount; row += 1) {\n          if (qrcode.isDark(row, col) ) {\n            darkCount += 1;\n          }\n        }\n      }\n\n      var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n      lostPoint += ratio * 10;\n\n      return lostPoint;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // QRMath\n  //---------------------------------------------------------------------\n\n  var QRMath = function() {\n\n    var EXP_TABLE = new Array(256);\n    var LOG_TABLE = new Array(256);\n\n    // initialize tables\n    for (var i = 0; i < 8; i += 1) {\n      EXP_TABLE[i] = 1 << i;\n    }\n    for (var i = 8; i < 256; i += 1) {\n      EXP_TABLE[i] = EXP_TABLE[i - 4]\n        ^ EXP_TABLE[i - 5]\n        ^ EXP_TABLE[i - 6]\n        ^ EXP_TABLE[i - 8];\n    }\n    for (var i = 0; i < 255; i += 1) {\n      LOG_TABLE[EXP_TABLE[i] ] = i;\n    }\n\n    var _this = {};\n\n    _this.glog = function(n) {\n\n      if (n < 1) {\n        throw 'glog(' + n + ')';\n      }\n\n      return LOG_TABLE[n];\n    };\n\n    _this.gexp = function(n) {\n\n      while (n < 0) {\n        n += 255;\n      }\n\n      while (n >= 256) {\n        n -= 255;\n      }\n\n      return EXP_TABLE[n];\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrPolynomial\n  //---------------------------------------------------------------------\n\n  function qrPolynomial(num, shift) {\n\n    if (typeof num.length == 'undefined') {\n      throw num.length + '/' + shift;\n    }\n\n    var _num = function() {\n      var offset = 0;\n      while (offset < num.length && num[offset] == 0) {\n        offset += 1;\n      }\n      var _num = new Array(num.length - offset + shift);\n      for (var i = 0; i < num.length - offset; i += 1) {\n        _num[i] = num[i + offset];\n      }\n      return _num;\n    }();\n\n    var _this = {};\n\n    _this.getAt = function(index) {\n      return _num[index];\n    };\n\n    _this.getLength = function() {\n      return _num.length;\n    };\n\n    _this.multiply = function(e) {\n\n      var num = new Array(_this.getLength() + e.getLength() - 1);\n\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        for (var j = 0; j < e.getLength(); j += 1) {\n          num[i + j] ^= QRMath.gexp(QRMath.glog(_this.getAt(i) ) + QRMath.glog(e.getAt(j) ) );\n        }\n      }\n\n      return qrPolynomial(num, 0);\n    };\n\n    _this.mod = function(e) {\n\n      if (_this.getLength() - e.getLength() < 0) {\n        return _this;\n      }\n\n      var ratio = QRMath.glog(_this.getAt(0) ) - QRMath.glog(e.getAt(0) );\n\n      var num = new Array(_this.getLength() );\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        num[i] = _this.getAt(i);\n      }\n\n      for (var i = 0; i < e.getLength(); i += 1) {\n        num[i] ^= QRMath.gexp(QRMath.glog(e.getAt(i) ) + ratio);\n      }\n\n      // recursive call\n      return qrPolynomial(num, 0).mod(e);\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // QRRSBlock\n  //---------------------------------------------------------------------\n\n  var QRRSBlock = function() {\n\n    var RS_BLOCK_TABLE = [\n\n      // L\n      // M\n      // Q\n      // H\n\n      // 1\n      [1, 26, 19],\n      [1, 26, 16],\n      [1, 26, 13],\n      [1, 26, 9],\n\n      // 2\n      [1, 44, 34],\n      [1, 44, 28],\n      [1, 44, 22],\n      [1, 44, 16],\n\n      // 3\n      [1, 70, 55],\n      [1, 70, 44],\n      [2, 35, 17],\n      [2, 35, 13],\n\n      // 4\n      [1, 100, 80],\n      [2, 50, 32],\n      [2, 50, 24],\n      [4, 25, 9],\n\n      // 5\n      [1, 134, 108],\n      [2, 67, 43],\n      [2, 33, 15, 2, 34, 16],\n      [2, 33, 11, 2, 34, 12],\n\n      // 6\n      [2, 86, 68],\n      [4, 43, 27],\n      [4, 43, 19],\n      [4, 43, 15],\n\n      // 7\n      [2, 98, 78],\n      [4, 49, 31],\n      [2, 32, 14, 4, 33, 15],\n      [4, 39, 13, 1, 40, 14],\n\n      // 8\n      [2, 121, 97],\n      [2, 60, 38, 2, 61, 39],\n      [4, 40, 18, 2, 41, 19],\n      [4, 40, 14, 2, 41, 15],\n\n      // 9\n      [2, 146, 116],\n      [3, 58, 36, 2, 59, 37],\n      [4, 36, 16, 4, 37, 17],\n      [4, 36, 12, 4, 37, 13],\n\n      // 10\n      [2, 86, 68, 2, 87, 69],\n      [4, 69, 43, 1, 70, 44],\n      [6, 43, 19, 2, 44, 20],\n      [6, 43, 15, 2, 44, 16],\n\n      // 11\n      [4, 101, 81],\n      [1, 80, 50, 4, 81, 51],\n      [4, 50, 22, 4, 51, 23],\n      [3, 36, 12, 8, 37, 13],\n\n      // 12\n      [2, 116, 92, 2, 117, 93],\n      [6, 58, 36, 2, 59, 37],\n      [4, 46, 20, 6, 47, 21],\n      [7, 42, 14, 4, 43, 15],\n\n      // 13\n      [4, 133, 107],\n      [8, 59, 37, 1, 60, 38],\n      [8, 44, 20, 4, 45, 21],\n      [12, 33, 11, 4, 34, 12],\n\n      // 14\n      [3, 145, 115, 1, 146, 116],\n      [4, 64, 40, 5, 65, 41],\n      [11, 36, 16, 5, 37, 17],\n      [11, 36, 12, 5, 37, 13],\n\n      // 15\n      [5, 109, 87, 1, 110, 88],\n      [5, 65, 41, 5, 66, 42],\n      [5, 54, 24, 7, 55, 25],\n      [11, 36, 12, 7, 37, 13],\n\n      // 16\n      [5, 122, 98, 1, 123, 99],\n      [7, 73, 45, 3, 74, 46],\n      [15, 43, 19, 2, 44, 20],\n      [3, 45, 15, 13, 46, 16],\n\n      // 17\n      [1, 135, 107, 5, 136, 108],\n      [10, 74, 46, 1, 75, 47],\n      [1, 50, 22, 15, 51, 23],\n      [2, 42, 14, 17, 43, 15],\n\n      // 18\n      [5, 150, 120, 1, 151, 121],\n      [9, 69, 43, 4, 70, 44],\n      [17, 50, 22, 1, 51, 23],\n      [2, 42, 14, 19, 43, 15],\n\n      // 19\n      [3, 141, 113, 4, 142, 114],\n      [3, 70, 44, 11, 71, 45],\n      [17, 47, 21, 4, 48, 22],\n      [9, 39, 13, 16, 40, 14],\n\n      // 20\n      [3, 135, 107, 5, 136, 108],\n      [3, 67, 41, 13, 68, 42],\n      [15, 54, 24, 5, 55, 25],\n      [15, 43, 15, 10, 44, 16],\n\n      // 21\n      [4, 144, 116, 4, 145, 117],\n      [17, 68, 42],\n      [17, 50, 22, 6, 51, 23],\n      [19, 46, 16, 6, 47, 17],\n\n      // 22\n      [2, 139, 111, 7, 140, 112],\n      [17, 74, 46],\n      [7, 54, 24, 16, 55, 25],\n      [34, 37, 13],\n\n      // 23\n      [4, 151, 121, 5, 152, 122],\n      [4, 75, 47, 14, 76, 48],\n      [11, 54, 24, 14, 55, 25],\n      [16, 45, 15, 14, 46, 16],\n\n      // 24\n      [6, 147, 117, 4, 148, 118],\n      [6, 73, 45, 14, 74, 46],\n      [11, 54, 24, 16, 55, 25],\n      [30, 46, 16, 2, 47, 17],\n\n      // 25\n      [8, 132, 106, 4, 133, 107],\n      [8, 75, 47, 13, 76, 48],\n      [7, 54, 24, 22, 55, 25],\n      [22, 45, 15, 13, 46, 16],\n\n      // 26\n      [10, 142, 114, 2, 143, 115],\n      [19, 74, 46, 4, 75, 47],\n      [28, 50, 22, 6, 51, 23],\n      [33, 46, 16, 4, 47, 17],\n\n      // 27\n      [8, 152, 122, 4, 153, 123],\n      [22, 73, 45, 3, 74, 46],\n      [8, 53, 23, 26, 54, 24],\n      [12, 45, 15, 28, 46, 16],\n\n      // 28\n      [3, 147, 117, 10, 148, 118],\n      [3, 73, 45, 23, 74, 46],\n      [4, 54, 24, 31, 55, 25],\n      [11, 45, 15, 31, 46, 16],\n\n      // 29\n      [7, 146, 116, 7, 147, 117],\n      [21, 73, 45, 7, 74, 46],\n      [1, 53, 23, 37, 54, 24],\n      [19, 45, 15, 26, 46, 16],\n\n      // 30\n      [5, 145, 115, 10, 146, 116],\n      [19, 75, 47, 10, 76, 48],\n      [15, 54, 24, 25, 55, 25],\n      [23, 45, 15, 25, 46, 16],\n\n      // 31\n      [13, 145, 115, 3, 146, 116],\n      [2, 74, 46, 29, 75, 47],\n      [42, 54, 24, 1, 55, 25],\n      [23, 45, 15, 28, 46, 16],\n\n      // 32\n      [17, 145, 115],\n      [10, 74, 46, 23, 75, 47],\n      [10, 54, 24, 35, 55, 25],\n      [19, 45, 15, 35, 46, 16],\n\n      // 33\n      [17, 145, 115, 1, 146, 116],\n      [14, 74, 46, 21, 75, 47],\n      [29, 54, 24, 19, 55, 25],\n      [11, 45, 15, 46, 46, 16],\n\n      // 34\n      [13, 145, 115, 6, 146, 116],\n      [14, 74, 46, 23, 75, 47],\n      [44, 54, 24, 7, 55, 25],\n      [59, 46, 16, 1, 47, 17],\n\n      // 35\n      [12, 151, 121, 7, 152, 122],\n      [12, 75, 47, 26, 76, 48],\n      [39, 54, 24, 14, 55, 25],\n      [22, 45, 15, 41, 46, 16],\n\n      // 36\n      [6, 151, 121, 14, 152, 122],\n      [6, 75, 47, 34, 76, 48],\n      [46, 54, 24, 10, 55, 25],\n      [2, 45, 15, 64, 46, 16],\n\n      // 37\n      [17, 152, 122, 4, 153, 123],\n      [29, 74, 46, 14, 75, 47],\n      [49, 54, 24, 10, 55, 25],\n      [24, 45, 15, 46, 46, 16],\n\n      // 38\n      [4, 152, 122, 18, 153, 123],\n      [13, 74, 46, 32, 75, 47],\n      [48, 54, 24, 14, 55, 25],\n      [42, 45, 15, 32, 46, 16],\n\n      // 39\n      [20, 147, 117, 4, 148, 118],\n      [40, 75, 47, 7, 76, 48],\n      [43, 54, 24, 22, 55, 25],\n      [10, 45, 15, 67, 46, 16],\n\n      // 40\n      [19, 148, 118, 6, 149, 119],\n      [18, 75, 47, 31, 76, 48],\n      [34, 54, 24, 34, 55, 25],\n      [20, 45, 15, 61, 46, 16]\n    ];\n\n    var qrRSBlock = function(totalCount, dataCount) {\n      var _this = {};\n      _this.totalCount = totalCount;\n      _this.dataCount = dataCount;\n      return _this;\n    };\n\n    var _this = {};\n\n    var getRsBlockTable = function(typeNumber, errorCorrectionLevel) {\n\n      switch(errorCorrectionLevel) {\n      case QRErrorCorrectionLevel.L :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n      case QRErrorCorrectionLevel.M :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n      case QRErrorCorrectionLevel.Q :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n      case QRErrorCorrectionLevel.H :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n      default :\n        return undefined;\n      }\n    };\n\n    _this.getRSBlocks = function(typeNumber, errorCorrectionLevel) {\n\n      var rsBlock = getRsBlockTable(typeNumber, errorCorrectionLevel);\n\n      if (typeof rsBlock == 'undefined') {\n        throw 'bad rs block @ typeNumber:' + typeNumber +\n            '/errorCorrectionLevel:' + errorCorrectionLevel;\n      }\n\n      var length = rsBlock.length / 3;\n\n      var list = [];\n\n      for (var i = 0; i < length; i += 1) {\n\n        var count = rsBlock[i * 3 + 0];\n        var totalCount = rsBlock[i * 3 + 1];\n        var dataCount = rsBlock[i * 3 + 2];\n\n        for (var j = 0; j < count; j += 1) {\n          list.push(qrRSBlock(totalCount, dataCount) );\n        }\n      }\n\n      return list;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrBitBuffer\n  //---------------------------------------------------------------------\n\n  var qrBitBuffer = function() {\n\n    var _buffer = [];\n    var _length = 0;\n\n    var _this = {};\n\n    _this.getBuffer = function() {\n      return _buffer;\n    };\n\n    _this.getAt = function(index) {\n      var bufIndex = Math.floor(index / 8);\n      return ( (_buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n    };\n\n    _this.put = function(num, length) {\n      for (var i = 0; i < length; i += 1) {\n        _this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n      }\n    };\n\n    _this.getLengthInBits = function() {\n      return _length;\n    };\n\n    _this.putBit = function(bit) {\n\n      var bufIndex = Math.floor(_length / 8);\n      if (_buffer.length <= bufIndex) {\n        _buffer.push(0);\n      }\n\n      if (bit) {\n        _buffer[bufIndex] |= (0x80 >>> (_length % 8) );\n      }\n\n      _length += 1;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrNumber\n  //---------------------------------------------------------------------\n\n  var qrNumber = function(data) {\n\n    var _mode = QRMode.MODE_NUMBER;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _data;\n\n      var i = 0;\n\n      while (i + 2 < data.length) {\n        buffer.put(strToNum(data.substring(i, i + 3) ), 10);\n        i += 3;\n      }\n\n      if (i < data.length) {\n        if (data.length - i == 1) {\n          buffer.put(strToNum(data.substring(i, i + 1) ), 4);\n        } else if (data.length - i == 2) {\n          buffer.put(strToNum(data.substring(i, i + 2) ), 7);\n        }\n      }\n    };\n\n    var strToNum = function(s) {\n      var num = 0;\n      for (var i = 0; i < s.length; i += 1) {\n        num = num * 10 + chatToNum(s.charAt(i) );\n      }\n      return num;\n    };\n\n    var chatToNum = function(c) {\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      }\n      throw 'illegal char :' + c;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrAlphaNum\n  //---------------------------------------------------------------------\n\n  var qrAlphaNum = function(data) {\n\n    var _mode = QRMode.MODE_ALPHA_NUM;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var s = _data;\n\n      var i = 0;\n\n      while (i + 1 < s.length) {\n        buffer.put(\n          getCode(s.charAt(i) ) * 45 +\n          getCode(s.charAt(i + 1) ), 11);\n        i += 2;\n      }\n\n      if (i < s.length) {\n        buffer.put(getCode(s.charAt(i) ), 6);\n      }\n    };\n\n    var getCode = function(c) {\n\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      } else if ('A' <= c && c <= 'Z') {\n        return c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;\n      } else {\n        switch (c) {\n        case ' ' : return 36;\n        case '$' : return 37;\n        case '%' : return 38;\n        case '*' : return 39;\n        case '+' : return 40;\n        case '-' : return 41;\n        case '.' : return 42;\n        case '/' : return 43;\n        case ':' : return 44;\n        default :\n          throw 'illegal char :' + c;\n        }\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qr8BitByte\n  //---------------------------------------------------------------------\n\n  var qr8BitByte = function(data) {\n\n    var _mode = QRMode.MODE_8BIT_BYTE;\n    var _data = data;\n    var _bytes = qrcode.stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _bytes.length;\n    };\n\n    _this.write = function(buffer) {\n      for (var i = 0; i < _bytes.length; i += 1) {\n        buffer.put(_bytes[i], 8);\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrKanji\n  //---------------------------------------------------------------------\n\n  var qrKanji = function(data) {\n\n    var _mode = QRMode.MODE_KANJI;\n    var _data = data;\n\n    var stringToBytes = qrcode.stringToBytesFuncs['SJIS'];\n    if (!stringToBytes) {\n      throw 'sjis not supported.';\n    }\n    !function(c, code) {\n      // self test for sjis support.\n      var test = stringToBytes(c);\n      if (test.length != 2 || ( (test[0] << 8) | test[1]) != code) {\n        throw 'sjis not supported.';\n      }\n    }('\\u53cb', 0x9746);\n\n    var _bytes = stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return ~~(_bytes.length / 2);\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _bytes;\n\n      var i = 0;\n\n      while (i + 1 < data.length) {\n\n        var c = ( (0xff & data[i]) << 8) | (0xff & data[i + 1]);\n\n        if (0x8140 <= c && c <= 0x9FFC) {\n          c -= 0x8140;\n        } else if (0xE040 <= c && c <= 0xEBBF) {\n          c -= 0xC140;\n        } else {\n          throw 'illegal char at ' + (i + 1) + '/' + c;\n        }\n\n        c = ( (c >>> 8) & 0xff) * 0xC0 + (c & 0xff);\n\n        buffer.put(c, 13);\n\n        i += 2;\n      }\n\n      if (i < data.length) {\n        throw 'illegal char at ' + (i + 1);\n      }\n    };\n\n    return _this;\n  };\n\n  //=====================================================================\n  // GIF Support etc.\n  //\n\n  //---------------------------------------------------------------------\n  // byteArrayOutputStream\n  //---------------------------------------------------------------------\n\n  var byteArrayOutputStream = function() {\n\n    var _bytes = [];\n\n    var _this = {};\n\n    _this.writeByte = function(b) {\n      _bytes.push(b & 0xff);\n    };\n\n    _this.writeShort = function(i) {\n      _this.writeByte(i);\n      _this.writeByte(i >>> 8);\n    };\n\n    _this.writeBytes = function(b, off, len) {\n      off = off || 0;\n      len = len || b.length;\n      for (var i = 0; i < len; i += 1) {\n        _this.writeByte(b[i + off]);\n      }\n    };\n\n    _this.writeString = function(s) {\n      for (var i = 0; i < s.length; i += 1) {\n        _this.writeByte(s.charCodeAt(i) );\n      }\n    };\n\n    _this.toByteArray = function() {\n      return _bytes;\n    };\n\n    _this.toString = function() {\n      var s = '';\n      s += '[';\n      for (var i = 0; i < _bytes.length; i += 1) {\n        if (i > 0) {\n          s += ',';\n        }\n        s += _bytes[i];\n      }\n      s += ']';\n      return s;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64EncodeOutputStream\n  //---------------------------------------------------------------------\n\n  var base64EncodeOutputStream = function() {\n\n    var _buffer = 0;\n    var _buflen = 0;\n    var _length = 0;\n    var _base64 = '';\n\n    var _this = {};\n\n    var writeEncoded = function(b) {\n      _base64 += String.fromCharCode(encode(b & 0x3f) );\n    };\n\n    var encode = function(n) {\n      if (n < 0) {\n        // error.\n      } else if (n < 26) {\n        return 0x41 + n;\n      } else if (n < 52) {\n        return 0x61 + (n - 26);\n      } else if (n < 62) {\n        return 0x30 + (n - 52);\n      } else if (n == 62) {\n        return 0x2b;\n      } else if (n == 63) {\n        return 0x2f;\n      }\n      throw 'n:' + n;\n    };\n\n    _this.writeByte = function(n) {\n\n      _buffer = (_buffer << 8) | (n & 0xff);\n      _buflen += 8;\n      _length += 1;\n\n      while (_buflen >= 6) {\n        writeEncoded(_buffer >>> (_buflen - 6) );\n        _buflen -= 6;\n      }\n    };\n\n    _this.flush = function() {\n\n      if (_buflen > 0) {\n        writeEncoded(_buffer << (6 - _buflen) );\n        _buffer = 0;\n        _buflen = 0;\n      }\n\n      if (_length % 3 != 0) {\n        // padding\n        var padlen = 3 - _length % 3;\n        for (var i = 0; i < padlen; i += 1) {\n          _base64 += '=';\n        }\n      }\n    };\n\n    _this.toString = function() {\n      return _base64;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64DecodeInputStream\n  //---------------------------------------------------------------------\n\n  var base64DecodeInputStream = function(str) {\n\n    var _str = str;\n    var _pos = 0;\n    var _buffer = 0;\n    var _buflen = 0;\n\n    var _this = {};\n\n    _this.read = function() {\n\n      while (_buflen < 8) {\n\n        if (_pos >= _str.length) {\n          if (_buflen == 0) {\n            return -1;\n          }\n          throw 'unexpected end of file./' + _buflen;\n        }\n\n        var c = _str.charAt(_pos);\n        _pos += 1;\n\n        if (c == '=') {\n          _buflen = 0;\n          return -1;\n        } else if (c.match(/^\\s$/) ) {\n          // ignore if whitespace.\n          continue;\n        }\n\n        _buffer = (_buffer << 6) | decode(c.charCodeAt(0) );\n        _buflen += 6;\n      }\n\n      var n = (_buffer >>> (_buflen - 8) ) & 0xff;\n      _buflen -= 8;\n      return n;\n    };\n\n    var decode = function(c) {\n      if (0x41 <= c && c <= 0x5a) {\n        return c - 0x41;\n      } else if (0x61 <= c && c <= 0x7a) {\n        return c - 0x61 + 26;\n      } else if (0x30 <= c && c <= 0x39) {\n        return c - 0x30 + 52;\n      } else if (c == 0x2b) {\n        return 62;\n      } else if (c == 0x2f) {\n        return 63;\n      } else {\n        throw 'c:' + c;\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // gifImage (B/W)\n  //---------------------------------------------------------------------\n\n  var gifImage = function(width, height) {\n\n    var _width = width;\n    var _height = height;\n    var _data = new Array(width * height);\n\n    var _this = {};\n\n    _this.setPixel = function(x, y, pixel) {\n      _data[y * _width + x] = pixel;\n    };\n\n    _this.write = function(out) {\n\n      //---------------------------------\n      // GIF Signature\n\n      out.writeString('GIF87a');\n\n      //---------------------------------\n      // Screen Descriptor\n\n      out.writeShort(_width);\n      out.writeShort(_height);\n\n      out.writeByte(0x80); // 2bit\n      out.writeByte(0);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Global Color Map\n\n      // black\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n\n      // white\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n\n      //---------------------------------\n      // Image Descriptor\n\n      out.writeString(',');\n      out.writeShort(0);\n      out.writeShort(0);\n      out.writeShort(_width);\n      out.writeShort(_height);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Local Color Map\n\n      //---------------------------------\n      // Raster Data\n\n      var lzwMinCodeSize = 2;\n      var raster = getLZWRaster(lzwMinCodeSize);\n\n      out.writeByte(lzwMinCodeSize);\n\n      var offset = 0;\n\n      while (raster.length - offset > 255) {\n        out.writeByte(255);\n        out.writeBytes(raster, offset, 255);\n        offset += 255;\n      }\n\n      out.writeByte(raster.length - offset);\n      out.writeBytes(raster, offset, raster.length - offset);\n      out.writeByte(0x00);\n\n      //---------------------------------\n      // GIF Terminator\n      out.writeString(';');\n    };\n\n    var bitOutputStream = function(out) {\n\n      var _out = out;\n      var _bitLength = 0;\n      var _bitBuffer = 0;\n\n      var _this = {};\n\n      _this.write = function(data, length) {\n\n        if ( (data >>> length) != 0) {\n          throw 'length over';\n        }\n\n        while (_bitLength + length >= 8) {\n          _out.writeByte(0xff & ( (data << _bitLength) | _bitBuffer) );\n          length -= (8 - _bitLength);\n          data >>>= (8 - _bitLength);\n          _bitBuffer = 0;\n          _bitLength = 0;\n        }\n\n        _bitBuffer = (data << _bitLength) | _bitBuffer;\n        _bitLength = _bitLength + length;\n      };\n\n      _this.flush = function() {\n        if (_bitLength > 0) {\n          _out.writeByte(_bitBuffer);\n        }\n      };\n\n      return _this;\n    };\n\n    var getLZWRaster = function(lzwMinCodeSize) {\n\n      var clearCode = 1 << lzwMinCodeSize;\n      var endCode = (1 << lzwMinCodeSize) + 1;\n      var bitLength = lzwMinCodeSize + 1;\n\n      // Setup LZWTable\n      var table = lzwTable();\n\n      for (var i = 0; i < clearCode; i += 1) {\n        table.add(String.fromCharCode(i) );\n      }\n      table.add(String.fromCharCode(clearCode) );\n      table.add(String.fromCharCode(endCode) );\n\n      var byteOut = byteArrayOutputStream();\n      var bitOut = bitOutputStream(byteOut);\n\n      // clear code\n      bitOut.write(clearCode, bitLength);\n\n      var dataIndex = 0;\n\n      var s = String.fromCharCode(_data[dataIndex]);\n      dataIndex += 1;\n\n      while (dataIndex < _data.length) {\n\n        var c = String.fromCharCode(_data[dataIndex]);\n        dataIndex += 1;\n\n        if (table.contains(s + c) ) {\n\n          s = s + c;\n\n        } else {\n\n          bitOut.write(table.indexOf(s), bitLength);\n\n          if (table.size() < 0xfff) {\n\n            if (table.size() == (1 << bitLength) ) {\n              bitLength += 1;\n            }\n\n            table.add(s + c);\n          }\n\n          s = c;\n        }\n      }\n\n      bitOut.write(table.indexOf(s), bitLength);\n\n      // end code\n      bitOut.write(endCode, bitLength);\n\n      bitOut.flush();\n\n      return byteOut.toByteArray();\n    };\n\n    var lzwTable = function() {\n\n      var _map = {};\n      var _size = 0;\n\n      var _this = {};\n\n      _this.add = function(key) {\n        if (_this.contains(key) ) {\n          throw 'dup key:' + key;\n        }\n        _map[key] = _size;\n        _size += 1;\n      };\n\n      _this.size = function() {\n        return _size;\n      };\n\n      _this.indexOf = function(key) {\n        return _map[key];\n      };\n\n      _this.contains = function(key) {\n        return typeof _map[key] != 'undefined';\n      };\n\n      return _this;\n    };\n\n    return _this;\n  };\n\n  var createDataURL = function(width, height, getPixel) {\n    var gif = gifImage(width, height);\n    for (var y = 0; y < height; y += 1) {\n      for (var x = 0; x < width; x += 1) {\n        gif.setPixel(x, y, getPixel(x, y) );\n      }\n    }\n\n    var b = byteArrayOutputStream();\n    gif.write(b);\n\n    var base64 = base64EncodeOutputStream();\n    var bytes = b.toByteArray();\n    for (var i = 0; i < bytes.length; i += 1) {\n      base64.writeByte(bytes[i]);\n    }\n    base64.flush();\n\n    return 'data:image/gif;base64,' + base64;\n  };\n\n  //---------------------------------------------------------------------\n  // returns qrcode function.\n\n  return qrcode;\n}();\n\n// multibyte support\n!function() {\n\n  qrcode.stringToBytesFuncs['UTF-8'] = function(s) {\n    // http://stackoverflow.com/questions/18729405/how-to-convert-utf8-string-to-byte-array\n    function toUTF8Array(str) {\n      var utf8 = [];\n      for (var i=0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) utf8.push(charcode);\n        else if (charcode < 0x800) {\n          utf8.push(0xc0 | (charcode >> 6),\n              0x80 | (charcode & 0x3f));\n        }\n        else if (charcode < 0xd800 || charcode >= 0xe000) {\n          utf8.push(0xe0 | (charcode >> 12),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n        // surrogate pair\n        else {\n          i++;\n          // UTF-16 encodes 0x10000-0x10FFFF by\n          // subtracting 0x10000 and splitting the\n          // 20 bits of 0x0-0xFFFFF into two halves\n          charcode = 0x10000 + (((charcode & 0x3ff)<<10)\n            | (str.charCodeAt(i) & 0x3ff));\n          utf8.push(0xf0 | (charcode >>18),\n              0x80 | ((charcode>>12) & 0x3f),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n      }\n      return utf8;\n    }\n    return toUTF8Array(s);\n  };\n\n}();\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n      define([], factory);\n  } else if (typeof exports === 'object') {\n      module.exports = factory();\n  }\n}(function () {\n    return qrcode;\n}));\n","/*! simple-concat. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = function (stream, cb) {\n  var chunks = []\n  stream.on('data', function (chunk) {\n    chunks.push(chunk)\n  })\n  stream.once('end', function () {\n    if (cb) cb(null, Buffer.concat(chunks))\n    cb = null\n  })\n  stream.once('error', function (err) {\n    if (cb) cb(err)\n    cb = null\n  })\n}\n","module.exports = simpleGet\n\nconst concat = require('simple-concat')\nconst decompressResponse = require('decompress-response') // excluded from browser build\nconst http = require('http')\nconst https = require('https')\nconst once = require('once')\nconst querystring = require('querystring')\nconst url = require('url')\n\nconst isStream = o => o !== null && typeof o === 'object' && typeof o.pipe === 'function'\n\nfunction simpleGet (opts, cb) {\n  opts = Object.assign({ maxRedirects: 10 }, typeof opts === 'string' ? { url: opts } : opts)\n  cb = once(cb)\n\n  if (opts.url) {\n    const { hostname, port, protocol, auth, path } = url.parse(opts.url) // eslint-disable-line node/no-deprecated-api\n    delete opts.url\n    if (!hostname && !port && !protocol && !auth) opts.path = path // Relative redirect\n    else Object.assign(opts, { hostname, port, protocol, auth, path }) // Absolute redirect\n  }\n\n  const headers = { 'accept-encoding': 'gzip, deflate' }\n  if (opts.headers) Object.keys(opts.headers).forEach(k => (headers[k.toLowerCase()] = opts.headers[k]))\n  opts.headers = headers\n\n  let body\n  if (opts.body) {\n    body = opts.json && !isStream(opts.body) ? JSON.stringify(opts.body) : opts.body\n  } else if (opts.form) {\n    body = typeof opts.form === 'string' ? opts.form : querystring.stringify(opts.form)\n    opts.headers['content-type'] = 'application/x-www-form-urlencoded'\n  }\n\n  if (body) {\n    if (!opts.method) opts.method = 'POST'\n    if (!isStream(body)) opts.headers['content-length'] = Buffer.byteLength(body)\n    if (opts.json && !opts.form) opts.headers['content-type'] = 'application/json'\n  }\n  delete opts.body; delete opts.form\n\n  if (opts.json) opts.headers.accept = 'application/json'\n  if (opts.method) opts.method = opts.method.toUpperCase()\n\n  const protocol = opts.protocol === 'https:' ? https : http // Support http/https urls\n  const req = protocol.request(opts, res => {\n    if (opts.followRedirects !== false && res.statusCode >= 300 && res.statusCode < 400 && res.headers.location) {\n      opts.url = res.headers.location // Follow 3xx redirects\n      delete opts.headers.host // Discard `host` header on redirect (see #32)\n      res.resume() // Discard response\n\n      if (opts.method === 'POST' && [301, 302].includes(res.statusCode)) {\n        opts.method = 'GET' // On 301/302 redirect, change POST to GET (see #35)\n        delete opts.headers['content-length']; delete opts.headers['content-type']\n      }\n\n      if (opts.maxRedirects-- === 0) return cb(new Error('too many redirects'))\n      else return simpleGet(opts, cb)\n    }\n\n    const tryUnzip = typeof decompressResponse === 'function' && opts.method !== 'HEAD'\n    cb(null, tryUnzip ? decompressResponse(res) : res)\n  })\n  req.on('timeout', () => {\n    req.abort()\n    cb(new Error('Request timed out'))\n  })\n  req.on('error', cb)\n\n  if (isStream(body)) body.on('error', cb).pipe(req)\n  else req.end(body)\n\n  return req\n}\n\nsimpleGet.concat = (opts, cb) => {\n  return simpleGet(opts, (err, res) => {\n    if (err) return cb(err)\n    concat(res, (err, data) => {\n      if (err) return cb(err)\n      if (opts.json) {\n        try {\n          data = JSON.parse(data.toString())\n        } catch (err) {\n          return cb(err, res, data)\n        }\n      }\n      cb(null, res, data)\n    })\n  })\n}\n\n;['get', 'post', 'put', 'patch', 'head', 'delete'].forEach(method => {\n  simpleGet[method] = (opts, cb) => {\n    if (typeof opts === 'string') opts = { url: opts }\n    return simpleGet(Object.assign({ method: method.toUpperCase() }, opts), cb)\n  }\n})\n","import { UnknownObject } from \"../types\";\n\nconst isObject = (obj: Record<string, unknown>): boolean => !!obj && typeof obj === \"object\" && !Array.isArray(obj);\n\nexport default function mergeDeep(target: UnknownObject, ...sources: UnknownObject[]): UnknownObject {\n  if (!sources.length) return target;\n  const source = sources.shift();\n  if (source === undefined || !isObject(target) || !isObject(source)) return target;\n  target = { ...target };\n  Object.keys(source).forEach((key: string): void => {\n    const targetValue = target[key];\n    const sourceValue = source[key];\n\n    if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\n      target[key] = sourceValue;\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\n      target[key] = mergeDeep(Object.assign({}, targetValue), sourceValue);\n    } else {\n      target[key] = sourceValue;\n    }\n  });\n\n  return mergeDeep(target, ...sources);\n}\n","interface ErrorCorrectionPercents {\n  [key: string]: number;\n}\n\nexport default {\n  L: 0.07,\n  M: 0.15,\n  Q: 0.25,\n  H: 0.3\n} as ErrorCorrectionPercents;\n","import dotTypes from \"../constants/dotTypes\";\nimport { DotType } from \"../types\";\nimport { CanvasRenderingContext2D } from \"canvas\";\n\ntype GetNeighbor = (x: number, y: number) => boolean;\ntype DrawArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  getNeighbor: GetNeighbor;\n};\n\ntype BasicFigureDrawArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  rotation: number;\n};\n\ntype RotateFigureArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  rotation: number;\n  draw: () => void;\n};\n\nexport default class QRDot {\n  _context: CanvasRenderingContext2D;\n  _type: DotType;\n\n  constructor({ context, type }: { context: CanvasRenderingContext2D; type: DotType }) {\n    this._context = context;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, getNeighbor: GetNeighbor): void {\n    const context = this._context;\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case dotTypes.dots:\n        drawFunction = this._drawDot;\n        break;\n      case dotTypes.classy:\n        drawFunction = this._drawClassy;\n        break;\n      case dotTypes.classyRounded:\n        drawFunction = this._drawClassyRounded;\n        break;\n      case dotTypes.rounded:\n        drawFunction = this._drawRounded;\n        break;\n      case dotTypes.extraRounded:\n        drawFunction = this._drawExtraRounded;\n        break;\n      case dotTypes.square:\n      default:\n        drawFunction = this._drawSquare;\n    }\n\n    drawFunction.call(this, { x, y, size, context, getNeighbor });\n  }\n\n  _rotateFigure({ x, y, size, context, rotation, draw }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    context.translate(cx, cy);\n    rotation && context.rotate(rotation);\n    draw();\n    context.closePath();\n    rotation && context.rotate(-rotation);\n    context.translate(-cx, -cy);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, 0, Math.PI * 2);\n      }\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.rect(-size / 2, -size / 2, size, size);\n      }\n    });\n  }\n\n  //if rotation === 0 - right side is rounded\n  _basicSideRounded(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, -Math.PI / 2, Math.PI / 2);\n        context.lineTo(-size / 2, size / 2);\n        context.lineTo(-size / 2, -size / 2);\n        context.lineTo(0, -size / 2);\n      }\n    });\n  }\n\n  //if rotation === 0 - top right corner is rounded\n  _basicCornerRounded(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, -Math.PI / 2, 0);\n        context.lineTo(size / 2, size / 2);\n        context.lineTo(-size / 2, size / 2);\n        context.lineTo(-size / 2, -size / 2);\n        context.lineTo(0, -size / 2);\n      }\n    });\n  }\n\n  //if rotation === 0 - top right corner is rounded\n  _basicCornerExtraRounded(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(-size / 2, size / 2, size, -Math.PI / 2, 0);\n        context.lineTo(-size / 2, size / 2);\n        context.lineTo(-size / 2, -size / 2);\n      }\n    });\n  }\n\n  _basicCornersRounded(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, -Math.PI / 2, 0);\n        context.lineTo(size / 2, size / 2);\n        context.lineTo(0, size / 2);\n        context.arc(0, 0, size / 2, Math.PI / 2, Math.PI);\n        context.lineTo(-size / 2, -size / 2);\n        context.lineTo(0, -size / 2);\n      }\n    });\n  }\n\n  _basicCornersExtraRounded(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(-size / 2, size / 2, size, -Math.PI / 2, 0);\n        context.arc(size / 2, -size / 2, size, Math.PI / 2, Math.PI);\n      }\n    });\n  }\n\n  _drawDot({ x, y, size, context }: DrawArgs): void {\n    this._basicDot({ x, y, size, context, rotation: 0 });\n  }\n\n  _drawSquare({ x, y, size, context }: DrawArgs): void {\n    this._basicSquare({ x, y, size, context, rotation: 0 });\n  }\n\n  _drawRounded({ x, y, size, context, getNeighbor }: DrawArgs): void {\n    const leftNeighbor = +getNeighbor(-1, 0);\n    const rightNeighbor = +getNeighbor(1, 0);\n    const topNeighbor = +getNeighbor(0, -1);\n    const bottomNeighbor = +getNeighbor(0, 1);\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicDot({ x, y, size, context, rotation: 0 });\n      return;\n    }\n\n    if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n      this._basicSquare({ x, y, size, context, rotation: 0 });\n      return;\n    }\n\n    if (neighborsCount === 2) {\n      let rotation = 0;\n\n      if (leftNeighbor && topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (topNeighbor && rightNeighbor) {\n        rotation = Math.PI;\n      } else if (rightNeighbor && bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicCornerRounded({ x, y, size, context, rotation });\n      return;\n    }\n\n    if (neighborsCount === 1) {\n      let rotation = 0;\n\n      if (topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (rightNeighbor) {\n        rotation = Math.PI;\n      } else if (bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicSideRounded({ x, y, size, context, rotation });\n      return;\n    }\n  }\n\n  _drawExtraRounded({ x, y, size, context, getNeighbor }: DrawArgs): void {\n    const leftNeighbor = +getNeighbor(-1, 0);\n    const rightNeighbor = +getNeighbor(1, 0);\n    const topNeighbor = +getNeighbor(0, -1);\n    const bottomNeighbor = +getNeighbor(0, 1);\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicDot({ x, y, size, context, rotation: 0 });\n      return;\n    }\n\n    if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n      this._basicSquare({ x, y, size, context, rotation: 0 });\n      return;\n    }\n\n    if (neighborsCount === 2) {\n      let rotation = 0;\n\n      if (leftNeighbor && topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (topNeighbor && rightNeighbor) {\n        rotation = Math.PI;\n      } else if (rightNeighbor && bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicCornerExtraRounded({ x, y, size, context, rotation });\n      return;\n    }\n\n    if (neighborsCount === 1) {\n      let rotation = 0;\n\n      if (topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (rightNeighbor) {\n        rotation = Math.PI;\n      } else if (bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicSideRounded({ x, y, size, context, rotation });\n      return;\n    }\n  }\n\n  _drawClassy({ x, y, size, context, getNeighbor }: DrawArgs): void {\n    const leftNeighbor = +getNeighbor(-1, 0);\n    const rightNeighbor = +getNeighbor(1, 0);\n    const topNeighbor = +getNeighbor(0, -1);\n    const bottomNeighbor = +getNeighbor(0, 1);\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicCornersRounded({ x, y, size, context, rotation: Math.PI / 2 });\n      return;\n    }\n\n    if (!leftNeighbor && !topNeighbor) {\n      this._basicCornerRounded({ x, y, size, context, rotation: -Math.PI / 2 });\n      return;\n    }\n\n    if (!rightNeighbor && !bottomNeighbor) {\n      this._basicCornerRounded({ x, y, size, context, rotation: Math.PI / 2 });\n      return;\n    }\n\n    this._basicSquare({ x, y, size, context, rotation: 0 });\n  }\n\n  _drawClassyRounded({ x, y, size, context, getNeighbor }: DrawArgs): void {\n    const leftNeighbor = +getNeighbor(-1, 0);\n    const rightNeighbor = +getNeighbor(1, 0);\n    const topNeighbor = +getNeighbor(0, -1);\n    const bottomNeighbor = +getNeighbor(0, 1);\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicCornersRounded({ x, y, size, context, rotation: Math.PI / 2 });\n      return;\n    }\n\n    if (!leftNeighbor && !topNeighbor) {\n      this._basicCornerExtraRounded({\n        x,\n        y,\n        size,\n        context,\n        rotation: -Math.PI / 2\n      });\n      return;\n    }\n\n    if (!rightNeighbor && !bottomNeighbor) {\n      this._basicCornerExtraRounded({\n        x,\n        y,\n        size,\n        context,\n        rotation: Math.PI / 2\n      });\n      return;\n    }\n\n    this._basicSquare({ x, y, size, context, rotation: 0 });\n  }\n}\n","import { DotTypes } from \"../types\";\n\nexport default {\n  dots: \"dots\",\n  rounded: \"rounded\",\n  classy: \"classy\",\n  classyRounded: \"classy-rounded\",\n  square: \"square\",\n  extraRounded: \"extra-rounded\"\n} as DotTypes;\n","import cornerSquareTypes from \"../constants/cornerSquareTypes\";\nimport { CornerSquareType } from \"../types\";\nimport { CanvasRenderingContext2D } from \"canvas\";\n\ntype DrawArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  rotation: number;\n};\n\ntype BasicFigureDrawArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  rotation: number;\n};\n\ntype RotateFigureArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  rotation: number;\n  draw: () => void;\n};\n\nexport default class QRCornerSquare {\n  _context: CanvasRenderingContext2D;\n  _type: CornerSquareType;\n\n  constructor({ context, type }: { context: CanvasRenderingContext2D; type: CornerSquareType }) {\n    this._context = context;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, rotation: number): void {\n    const context = this._context;\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case cornerSquareTypes.square:\n        drawFunction = this._drawSquare;\n        break;\n      case cornerSquareTypes.extraRounded:\n        drawFunction = this._drawExtraRounded;\n        break;\n      case cornerSquareTypes.dot:\n      default:\n        drawFunction = this._drawDot;\n    }\n\n    drawFunction.call(this, { x, y, size, context, rotation });\n  }\n\n  _rotateFigure({ x, y, size, context, rotation, draw }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    context.translate(cx, cy);\n    rotation && context.rotate(rotation);\n    draw();\n    context.closePath();\n    rotation && context.rotate(-rotation);\n    context.translate(-cx, -cy);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, 0, Math.PI * 2);\n        context.arc(0, 0, size / 2 - dotSize, 0, Math.PI * 2);\n      }\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.rect(-size / 2, -size / 2, size, size);\n        context.rect(-size / 2 + dotSize, -size / 2 + dotSize, size - 2 * dotSize, size - 2 * dotSize);\n      }\n    });\n  }\n\n  _basicExtraRounded(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(-dotSize, -dotSize, 2.5 * dotSize, Math.PI, -Math.PI / 2);\n        context.lineTo(dotSize, -3.5 * dotSize);\n        context.arc(dotSize, -dotSize, 2.5 * dotSize, -Math.PI / 2, 0);\n        context.lineTo(3.5 * dotSize, -dotSize);\n        context.arc(dotSize, dotSize, 2.5 * dotSize, 0, Math.PI / 2);\n        context.lineTo(-dotSize, 3.5 * dotSize);\n        context.arc(-dotSize, dotSize, 2.5 * dotSize, Math.PI / 2, Math.PI);\n        context.lineTo(-3.5 * dotSize, -dotSize);\n\n        context.arc(-dotSize, -dotSize, 1.5 * dotSize, Math.PI, -Math.PI / 2);\n        context.lineTo(dotSize, -2.5 * dotSize);\n        context.arc(dotSize, -dotSize, 1.5 * dotSize, -Math.PI / 2, 0);\n        context.lineTo(2.5 * dotSize, -dotSize);\n        context.arc(dotSize, dotSize, 1.5 * dotSize, 0, Math.PI / 2);\n        context.lineTo(-dotSize, 2.5 * dotSize);\n        context.arc(-dotSize, dotSize, 1.5 * dotSize, Math.PI / 2, Math.PI);\n        context.lineTo(-2.5 * dotSize, -dotSize);\n      }\n    });\n  }\n\n  _drawDot({ x, y, size, context, rotation }: DrawArgs): void {\n    this._basicDot({ x, y, size, context, rotation });\n  }\n\n  _drawSquare({ x, y, size, context, rotation }: DrawArgs): void {\n    this._basicSquare({ x, y, size, context, rotation });\n  }\n\n  _drawExtraRounded({ x, y, size, context, rotation }: DrawArgs): void {\n    this._basicExtraRounded({ x, y, size, context, rotation });\n  }\n}\n","import { CornerSquareTypes } from \"../types\";\n\nexport default {\n  dot: \"dot\",\n  square: \"square\",\n  extraRounded: \"extra-rounded\"\n} as CornerSquareTypes;\n","import cornerDotTypes from \"../constants/cornerDotTypes\";\nimport { CornerDotType } from \"../types\";\nimport { CanvasRenderingContext2D } from \"canvas\";\n\ntype DrawArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  rotation: number;\n};\n\ntype BasicFigureDrawArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  rotation: number;\n};\n\ntype RotateFigureArgs = {\n  x: number;\n  y: number;\n  size: number;\n  context: CanvasRenderingContext2D;\n  rotation: number;\n  draw: () => void;\n};\n\nexport default class QRCornerDot {\n  _context: CanvasRenderingContext2D;\n  _type: CornerDotType;\n\n  constructor({ context, type }: { context: CanvasRenderingContext2D; type: CornerDotType }) {\n    this._context = context;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, rotation: number): void {\n    const context = this._context;\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case cornerDotTypes.square:\n        drawFunction = this._drawSquare;\n        break;\n      case cornerDotTypes.dot:\n      default:\n        drawFunction = this._drawDot;\n    }\n\n    drawFunction.call(this, { x, y, size, context, rotation });\n  }\n\n  _rotateFigure({ x, y, size, context, rotation, draw }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    context.translate(cx, cy);\n    rotation && context.rotate(rotation);\n    draw();\n    context.closePath();\n    rotation && context.rotate(-rotation);\n    context.translate(-cx, -cy);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, 0, Math.PI * 2);\n      }\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.rect(-size / 2, -size / 2, size, size);\n      }\n    });\n  }\n\n  _drawDot({ x, y, size, context, rotation }: DrawArgs): void {\n    this._basicDot({ x, y, size, context, rotation });\n  }\n\n  _drawSquare({ x, y, size, context, rotation }: DrawArgs): void {\n    this._basicSquare({ x, y, size, context, rotation });\n  }\n}\n","import { CornerDotTypes } from \"../types\";\n\nexport default {\n  dot: \"dot\",\n  square: \"square\"\n} as CornerDotTypes;\n","import calculateImageSize from \"../tools/calculateImageSize\";\nimport errorCorrectionPercents from \"../constants/errorCorrectionPercents\";\nimport QRDot from \"./QRDot\";\nimport QRCornerSquare from \"./QRCornerSquare\";\nimport QRCornerDot from \"./QRCornerDot\";\nimport { RequiredOptions, Gradient } from \"./QROptions\";\nimport gradientTypes from \"../constants/gradientTypes\";\nimport { QRCode } from \"../types\";\n\nimport { Canvas, createCanvas, Image, loadImage, CanvasRenderingContext2D } from \"canvas\";\n\ntype FilterFunction = (i: number, j: number) => boolean;\n\nconst squareMask = [\n  [1, 1, 1, 1, 1, 1, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 1, 1, 1, 1, 1, 1]\n];\n\nconst dotMask = [\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0]\n];\n\nexport default class QRCanvas {\n  _canvas: Canvas;\n  _options: RequiredOptions;\n  _qr?: QRCode;\n  _image?: Image;\n\n  //TODO don't pass all options to this class\n  constructor(options: RequiredOptions) {\n    this._canvas = createCanvas(options.width, options.height);\n    this._options = options;\n  }\n\n  get context(): CanvasRenderingContext2D | null {\n    return this._canvas.getContext(\"2d\");\n  }\n\n  get width(): number {\n    return this._canvas.width;\n  }\n\n  get height(): number {\n    return this._canvas.height;\n  }\n\n  getCanvas(): Canvas {\n    return this._canvas;\n  }\n\n  clear(): void {\n    const canvasContext = this.context;\n\n    if (canvasContext) {\n      canvasContext.clearRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n  }\n\n  async drawQR(qr: QRCode): Promise<void> {\n    const count = qr.getModuleCount();\n    const minSize = Math.min(this._options.width, this._options.height) - this._options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    let drawImageSize = {\n      hideXDots: 0,\n      hideYDots: 0,\n      width: 0,\n      height: 0\n    };\n\n    this._qr = qr;\n\n    if (this._options.image) {\n      await this.loadImage();\n      if (!this._image) return;\n      const { imageOptions, qrOptions } = this._options;\n      const coverLevel = imageOptions.imageSize * errorCorrectionPercents[qrOptions.errorCorrectionLevel];\n      const maxHiddenDots = Math.floor(coverLevel * count * count);\n\n      drawImageSize = calculateImageSize({\n        originalWidth: this._image.width,\n        originalHeight: this._image.height,\n        maxHiddenDots,\n        maxHiddenAxisDots: count - 14,\n        dotSize\n      });\n    }\n\n    this.clear();\n    this.drawBackground();\n    this.drawDots((i: number, j: number): boolean => {\n      if (this._options.imageOptions.hideBackgroundDots) {\n        if (\n          i >= (count - drawImageSize.hideXDots) / 2 &&\n          i < (count + drawImageSize.hideXDots) / 2 &&\n          j >= (count - drawImageSize.hideYDots) / 2 &&\n          j < (count + drawImageSize.hideYDots) / 2\n        ) {\n          return false;\n        }\n      }\n\n      if (squareMask[i]?.[j] || squareMask[i - count + 7]?.[j] || squareMask[i]?.[j - count + 7]) {\n        return false;\n      }\n\n      if (dotMask[i]?.[j] || dotMask[i - count + 7]?.[j] || dotMask[i]?.[j - count + 7]) {\n        return false;\n      }\n\n      return true;\n    });\n    this.drawCorners();\n\n    if (this._options.image) {\n      this.drawImage({\n        width: drawImageSize.width,\n        height: drawImageSize.height,\n        count,\n        dotSize\n      });\n    }\n  }\n\n  drawBackground(): void {\n    const canvasContext = this.context;\n    const options = this._options;\n\n    if (canvasContext) {\n      if (options.backgroundOptions.gradient) {\n        const gradientOptions = options.backgroundOptions.gradient;\n        const gradient = this._createGradient({\n          context: canvasContext,\n          options: gradientOptions,\n          additionalRotation: 0,\n          x: 0,\n          y: 0,\n          size: this._canvas.width > this._canvas.height ? this._canvas.width : this._canvas.height\n        });\n\n        gradientOptions.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n          gradient.addColorStop(offset, color);\n        });\n\n        canvasContext.fillStyle = gradient;\n      } else if (options.backgroundOptions.color) {\n        canvasContext.fillStyle = options.backgroundOptions.color;\n      }\n      canvasContext.fillRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n  }\n\n  drawDots(filter?: FilterFunction): void {\n    if (!this._qr) {\n      throw \"QR code is not defined\";\n    }\n\n    const canvasContext = this.context;\n\n    if (!canvasContext) {\n      throw \"QR code is not defined\";\n    }\n\n    const options = this._options;\n    const count = this._qr.getModuleCount();\n\n    if (count > options.width || count > options.height) {\n      throw \"The canvas is too small.\";\n    }\n\n    const minSize = Math.min(options.width, options.height) - options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n    const dot = new QRDot({\n      context: canvasContext,\n      type: options.dotsOptions.type\n    });\n\n    canvasContext.beginPath();\n\n    for (let i = 0; i < count; i++) {\n      for (let j = 0; j < count; j++) {\n        if (filter && !filter(i, j)) {\n          continue;\n        }\n        if (!this._qr.isDark(i, j)) {\n          continue;\n        }\n        dot.draw(\n          xBeginning + i * dotSize,\n          yBeginning + j * dotSize,\n          dotSize,\n          (xOffset: number, yOffset: number): boolean => {\n            if (i + xOffset < 0 || j + yOffset < 0 || i + xOffset >= count || j + yOffset >= count) return false;\n            if (filter && !filter(i + xOffset, j + yOffset)) return false;\n            return !!this._qr && this._qr.isDark(i + xOffset, j + yOffset);\n          }\n        );\n      }\n    }\n\n    if (options.dotsOptions.gradient) {\n      const gradientOptions = options.dotsOptions.gradient;\n      const gradient = this._createGradient({\n        context: canvasContext,\n        options: gradientOptions,\n        additionalRotation: 0,\n        x: xBeginning,\n        y: yBeginning,\n        size: count * dotSize\n      });\n\n      gradientOptions.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n        gradient.addColorStop(offset, color);\n      });\n\n      canvasContext.fillStyle = canvasContext.strokeStyle = gradient;\n    } else if (options.dotsOptions.color) {\n      canvasContext.fillStyle = canvasContext.strokeStyle = options.dotsOptions.color;\n    }\n\n    canvasContext.fill(\"evenodd\");\n  }\n\n  drawCorners(filter?: FilterFunction): void {\n    if (!this._qr) {\n      throw \"QR code is not defined\";\n    }\n\n    const canvasContext = this.context;\n\n    if (!canvasContext) {\n      throw \"QR code is not defined\";\n    }\n\n    const options = this._options;\n\n    const count = this._qr.getModuleCount();\n    const minSize = Math.min(options.width, options.height) - options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    const cornersSquareSize = dotSize * 7;\n    const cornersDotSize = dotSize * 3;\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n\n    [\n      [0, 0, 0],\n      [1, 0, Math.PI / 2],\n      [0, 1, -Math.PI / 2]\n    ].forEach(([column, row, rotation]) => {\n      if (filter && !filter(column, row)) {\n        return;\n      }\n\n      const x = xBeginning + column * dotSize * (count - 7);\n      const y = yBeginning + row * dotSize * (count - 7);\n\n      if (options.cornersSquareOptions?.type) {\n        const cornersSquare = new QRCornerSquare({\n          context: canvasContext,\n          type: options.cornersSquareOptions?.type\n        });\n\n        canvasContext.beginPath();\n        cornersSquare.draw(x, y, cornersSquareSize, rotation);\n      } else {\n        const dot = new QRDot({\n          context: canvasContext,\n          type: options.dotsOptions.type\n        });\n\n        canvasContext.beginPath();\n\n        for (let i = 0; i < squareMask.length; i++) {\n          for (let j = 0; j < squareMask[i].length; j++) {\n            if (!squareMask[i]?.[j]) {\n              continue;\n            }\n\n            dot.draw(\n              x + i * dotSize,\n              y + j * dotSize,\n              dotSize,\n              (xOffset: number, yOffset: number): boolean => !!squareMask[i + xOffset]?.[j + yOffset]\n            );\n          }\n        }\n      }\n\n      if (options.cornersSquareOptions?.gradient) {\n        const gradientOptions = options.cornersSquareOptions.gradient;\n        const gradient = this._createGradient({\n          context: canvasContext,\n          options: gradientOptions,\n          additionalRotation: rotation,\n          x,\n          y,\n          size: cornersSquareSize\n        });\n\n        gradientOptions.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n          gradient.addColorStop(offset, color);\n        });\n\n        canvasContext.fillStyle = canvasContext.strokeStyle = gradient;\n      } else if (options.cornersSquareOptions?.color) {\n        canvasContext.fillStyle = canvasContext.strokeStyle = options.cornersSquareOptions.color;\n      }\n\n      canvasContext.fill(\"evenodd\");\n\n      if (options.cornersDotOptions?.type) {\n        const cornersDot = new QRCornerDot({\n          context: canvasContext,\n          type: options.cornersDotOptions?.type\n        });\n\n        canvasContext.beginPath();\n        cornersDot.draw(x + dotSize * 2, y + dotSize * 2, cornersDotSize, rotation);\n      } else {\n        const dot = new QRDot({\n          context: canvasContext,\n          type: options.dotsOptions.type\n        });\n\n        canvasContext.beginPath();\n\n        for (let i = 0; i < dotMask.length; i++) {\n          for (let j = 0; j < dotMask[i].length; j++) {\n            if (!dotMask[i]?.[j]) {\n              continue;\n            }\n\n            dot.draw(\n              x + i * dotSize,\n              y + j * dotSize,\n              dotSize,\n              (xOffset: number, yOffset: number): boolean => !!dotMask[i + xOffset]?.[j + yOffset]\n            );\n          }\n        }\n      }\n\n      if (options.cornersDotOptions?.gradient) {\n        const gradientOptions = options.cornersDotOptions.gradient;\n        const gradient = this._createGradient({\n          context: canvasContext,\n          options: gradientOptions,\n          additionalRotation: rotation,\n          x: x + dotSize * 2,\n          y: y + dotSize * 2,\n          size: cornersDotSize\n        });\n\n        gradientOptions.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n          gradient.addColorStop(offset, color);\n        });\n\n        canvasContext.fillStyle = canvasContext.strokeStyle = gradient;\n      } else if (options.cornersDotOptions?.color) {\n        canvasContext.fillStyle = canvasContext.strokeStyle = options.cornersDotOptions.color;\n      }\n\n      canvasContext.fill(\"evenodd\");\n    });\n  }\n\n  async loadImage(): Promise<void> {\n    const options = this._options;\n\n    if (!options.image) {\n      throw new Error(\"Image is not defined\");\n    }\n\n    // if (typeof options.imageOptions.crossOrigin === \"string\") {\n    //     image.crossOrigin = options.imageOptions.crossOrigin;\n    // }\n\n    this._image = await loadImage(options.image);\n  }\n\n  drawImage({\n    width,\n    height,\n    count,\n    dotSize\n  }: {\n    width: number;\n    height: number;\n    count: number;\n    dotSize: number;\n  }): void {\n    const canvasContext = this.context;\n\n    if (!canvasContext) {\n      throw \"canvasContext is not defined\";\n    }\n\n    if (!this._image) {\n      throw \"image is not defined\";\n    }\n\n    const options = this._options;\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n    const dx = xBeginning + options.imageOptions.margin + (count * dotSize - width) / 2;\n    const dy = yBeginning + options.imageOptions.margin + (count * dotSize - height) / 2;\n    const dw = width - options.imageOptions.margin * 2;\n    const dh = height - options.imageOptions.margin * 2;\n\n    canvasContext.drawImage(this._image, dx, dy, dw < 0 ? 0 : dw, dh < 0 ? 0 : dh);\n  }\n\n  _createGradient({\n    context,\n    options,\n    additionalRotation,\n    x,\n    y,\n    size\n  }: {\n    context: CanvasRenderingContext2D;\n    options: Gradient;\n    additionalRotation: number;\n    x: number;\n    y: number;\n    size: number;\n  }): CanvasGradient {\n    let gradient;\n\n    if (options.type === gradientTypes.radial) {\n      gradient = context.createRadialGradient(x + size / 2, y + size / 2, 0, x + size / 2, y + size / 2, size / 2);\n    } else {\n      const rotation = ((options.rotation || 0) + additionalRotation) % (2 * Math.PI);\n      const positiveRotation = (rotation + 2 * Math.PI) % (2 * Math.PI);\n      let x0 = x + size / 2;\n      let y0 = y + size / 2;\n      let x1 = x + size / 2;\n      let y1 = y + size / 2;\n\n      if (\n        (positiveRotation >= 0 && positiveRotation <= 0.25 * Math.PI) ||\n        (positiveRotation > 1.75 * Math.PI && positiveRotation <= 2 * Math.PI)\n      ) {\n        x0 = x0 - size / 2;\n        y0 = y0 - (size / 2) * Math.tan(rotation);\n        x1 = x1 + size / 2;\n        y1 = y1 + (size / 2) * Math.tan(rotation);\n      } else if (positiveRotation > 0.25 * Math.PI && positiveRotation <= 0.75 * Math.PI) {\n        y0 = y0 - size / 2;\n        x0 = x0 - size / 2 / Math.tan(rotation);\n        y1 = y1 + size / 2;\n        x1 = x1 + size / 2 / Math.tan(rotation);\n      } else if (positiveRotation > 0.75 * Math.PI && positiveRotation <= 1.25 * Math.PI) {\n        x0 = x0 + size / 2;\n        y0 = y0 + (size / 2) * Math.tan(rotation);\n        x1 = x1 - size / 2;\n        y1 = y1 - (size / 2) * Math.tan(rotation);\n      } else if (positiveRotation > 1.25 * Math.PI && positiveRotation <= 1.75 * Math.PI) {\n        y0 = y0 + size / 2;\n        x0 = x0 + size / 2 / Math.tan(rotation);\n        y1 = y1 - size / 2;\n        x1 = x1 - size / 2 / Math.tan(rotation);\n      }\n\n      gradient = context.createLinearGradient(Math.round(x0), Math.round(y0), Math.round(x1), Math.round(y1));\n    }\n\n    return gradient;\n  }\n}\n","interface ImageSizeOptions {\n  originalHeight: number;\n  originalWidth: number;\n  maxHiddenDots: number;\n  maxHiddenAxisDots?: number;\n  dotSize: number;\n}\n\ninterface ImageSizeResult {\n  height: number;\n  width: number;\n  hideYDots: number;\n  hideXDots: number;\n}\n\nexport default function calculateImageSize({\n  originalHeight,\n  originalWidth,\n  maxHiddenDots,\n  maxHiddenAxisDots,\n  dotSize\n}: ImageSizeOptions): ImageSizeResult {\n  const hideDots = { x: 0, y: 0 };\n  const imageSize = { x: 0, y: 0 };\n\n  if (originalHeight <= 0 || originalWidth <= 0 || maxHiddenDots <= 0 || dotSize <= 0) {\n    return {\n      height: 0,\n      width: 0,\n      hideYDots: 0,\n      hideXDots: 0\n    };\n  }\n\n  const k = originalHeight / originalWidth;\n\n  //Getting the maximum possible axis hidden dots\n  hideDots.x = Math.floor(Math.sqrt(maxHiddenDots / k));\n  //The count of hidden dot's can't be less than 1\n  if (hideDots.x <= 0) hideDots.x = 1;\n  //Check the limit of the maximum allowed axis hidden dots\n  if (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.x) hideDots.x = maxHiddenAxisDots;\n  //The count of dots should be odd\n  if (hideDots.x % 2 === 0) hideDots.x--;\n  imageSize.x = hideDots.x * dotSize;\n  //Calculate opposite axis hidden dots based on axis value.\n  //The value will be odd.\n  //We use ceil to prevent dots covering by the image.\n  hideDots.y = 1 + 2 * Math.ceil((hideDots.x * k - 1) / 2);\n  imageSize.y = Math.round(imageSize.x * k);\n  //If the result dots count is bigger than max - then decrease size and calculate again\n  if (hideDots.y * hideDots.x > maxHiddenDots || (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.y)) {\n    if (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.y) {\n      hideDots.y = maxHiddenAxisDots;\n      if (hideDots.y % 2 === 0) hideDots.x--;\n    } else {\n      hideDots.y -= 2;\n    }\n    imageSize.y = hideDots.y * dotSize;\n    hideDots.x = 1 + 2 * Math.ceil((hideDots.y / k - 1) / 2);\n    imageSize.x = Math.round(imageSize.y / k);\n  }\n\n  return {\n    height: imageSize.y,\n    width: imageSize.x,\n    hideYDots: hideDots.y,\n    hideXDots: hideDots.x\n  };\n}\n","import { GradientTypes } from \"../types\";\n\nexport default {\n  radial: \"radial\",\n  linear: \"linear\"\n} as GradientTypes;\n","import { TypeNumber } from \"../types\";\n\ninterface TypesMap {\n  [key: number]: TypeNumber;\n}\n\nconst qrTypes: TypesMap = {};\n\nfor (let type = 0; type <= 40; type++) {\n  qrTypes[type] = type as TypeNumber;\n}\n\n// 0 types is autodetect\n\n// types = {\n//     0: 0,\n//     1: 1,\n//     ...\n//     40: 40\n// }\n\nexport default qrTypes;\n","import qrTypes from \"../constants/qrTypes\";\nimport errorCorrectionLevels from \"../constants/errorCorrectionLevels\";\nimport {\n  DotType,\n  GradientType,\n  CornerSquareType,\n  CornerDotType,\n  TypeNumber,\n  ErrorCorrectionLevel,\n  Mode\n} from \"../types\";\n\nexport type Gradient = {\n  type: GradientType;\n  rotation?: number;\n  colorStops: {\n    offset: number;\n    color: string;\n  }[];\n};\n\nexport type Options = {\n  width?: number;\n  height?: number;\n  data?: string;\n  image?: string;\n  qrOptions?: {\n    typeNumber?: TypeNumber;\n    mode?: Mode;\n    errorCorrectionLevel?: ErrorCorrectionLevel;\n  };\n  imageOptions?: {\n    hideBackgroundDots?: boolean;\n    imageSize?: number;\n    crossOrigin?: string;\n    margin?: number;\n  };\n  dotsOptions?: {\n    type?: DotType;\n    color?: string;\n    gradient?: Gradient;\n  };\n  cornersSquareOptions?: {\n    type?: CornerSquareType;\n    color?: string;\n    gradient?: Gradient;\n  };\n  cornersDotOptions?: {\n    type?: CornerDotType;\n    color?: string;\n    gradient?: Gradient;\n  };\n  backgroundOptions?: {\n    color?: string;\n    gradient?: Gradient;\n  };\n};\n\nexport interface RequiredOptions extends Options {\n  width: number;\n  height: number;\n  margin: number;\n  data: string;\n  qrOptions: {\n    typeNumber: TypeNumber;\n    mode?: Mode;\n    errorCorrectionLevel: ErrorCorrectionLevel;\n  };\n  imageOptions: {\n    hideBackgroundDots: boolean;\n    imageSize: number;\n    crossOrigin?: string;\n    margin: number;\n  };\n  dotsOptions: {\n    type: DotType;\n    color: string;\n    gradient?: Gradient;\n  };\n  backgroundOptions: {\n    color: string;\n    gradient?: Gradient;\n  };\n}\n\nconst defaultOptions: RequiredOptions = {\n  width: 300,\n  height: 300,\n  data: \"\",\n  margin: 0,\n  qrOptions: {\n    typeNumber: qrTypes[0],\n    mode: undefined,\n    errorCorrectionLevel: errorCorrectionLevels.Q\n  },\n  imageOptions: {\n    hideBackgroundDots: true,\n    imageSize: 0.4,\n    crossOrigin: undefined,\n    margin: 0\n  },\n  dotsOptions: {\n    type: \"square\",\n    color: \"#000\"\n  },\n  backgroundOptions: {\n    color: \"#fff\"\n  }\n};\n\nexport default defaultOptions;\n","import { ErrorCorrectionLevel } from \"../types\";\n\ninterface ErrorCorrectionLevels {\n  [key: string]: ErrorCorrectionLevel;\n}\n\nexport default {\n  L: \"L\",\n  M: \"M\",\n  Q: \"Q\",\n  H: \"H\"\n} as ErrorCorrectionLevels;\n","import { Gradient, RequiredOptions } from \"../core/QROptions\";\n\nfunction sanitizeGradient(gradient: Gradient): Gradient {\n  const newGradient = { ...gradient };\n\n  if (!newGradient.colorStops || !newGradient.colorStops.length) {\n    throw \"Field 'colorStops' is required in gradient\";\n  }\n\n  if (newGradient.rotation) {\n    newGradient.rotation = Number(newGradient.rotation);\n  } else {\n    newGradient.rotation = 0;\n  }\n\n  newGradient.colorStops = newGradient.colorStops.map((colorStop: { offset: number; color: string }) => ({\n    ...colorStop,\n    offset: Number(colorStop.offset)\n  }));\n\n  return newGradient;\n}\n\nexport default function sanitizeOptions(options: RequiredOptions): RequiredOptions {\n  const newOptions = { ...options };\n\n  newOptions.width = Number(newOptions.width);\n  newOptions.height = Number(newOptions.height);\n  newOptions.margin = Number(newOptions.margin);\n  newOptions.imageOptions = {\n    ...newOptions.imageOptions,\n    hideBackgroundDots: Boolean(newOptions.imageOptions.hideBackgroundDots),\n    imageSize: Number(newOptions.imageOptions.imageSize),\n    margin: Number(newOptions.imageOptions.margin)\n  };\n\n  if (newOptions.margin > Math.min(newOptions.width, newOptions.height)) {\n    newOptions.margin = Math.min(newOptions.width, newOptions.height);\n  }\n\n  newOptions.dotsOptions = {\n    ...newOptions.dotsOptions\n  };\n  if (newOptions.dotsOptions.gradient) {\n    newOptions.dotsOptions.gradient = sanitizeGradient(newOptions.dotsOptions.gradient);\n  }\n\n  if (newOptions.cornersSquareOptions) {\n    newOptions.cornersSquareOptions = {\n      ...newOptions.cornersSquareOptions\n    };\n    if (newOptions.cornersSquareOptions.gradient) {\n      newOptions.cornersSquareOptions.gradient = sanitizeGradient(newOptions.cornersSquareOptions.gradient);\n    }\n  }\n\n  if (newOptions.cornersDotOptions) {\n    newOptions.cornersDotOptions = {\n      ...newOptions.cornersDotOptions\n    };\n    if (newOptions.cornersDotOptions.gradient) {\n      newOptions.cornersDotOptions.gradient = sanitizeGradient(newOptions.cornersDotOptions.gradient);\n    }\n  }\n\n  if (newOptions.backgroundOptions) {\n    newOptions.backgroundOptions = {\n      ...newOptions.backgroundOptions\n    };\n    if (newOptions.backgroundOptions.gradient) {\n      newOptions.backgroundOptions.gradient = sanitizeGradient(newOptions.backgroundOptions.gradient);\n    }\n  }\n\n  return newOptions;\n}\n","import QRCodeStyling from \"./core/QRCodeStyling\";\nimport dotTypes from \"./constants/dotTypes\";\nimport cornerDotTypes from \"./constants/cornerDotTypes\";\nimport cornerSquareTypes from \"./constants/cornerSquareTypes\";\nimport errorCorrectionLevels from \"./constants/errorCorrectionLevels\";\nimport errorCorrectionPercents from \"./constants/errorCorrectionPercents\";\nimport modes from \"./constants/modes\";\nimport qrTypes from \"./constants/qrTypes\";\n\nexport { dotTypes, cornerDotTypes, cornerSquareTypes, errorCorrectionLevels, errorCorrectionPercents, modes, qrTypes };\nexport default QRCodeStyling;\n","import getMode from \"../tools/getMode\";\nimport mergeDeep from \"../tools/merge\";\nimport QRCanvas from \"./QRCanvas\";\nimport defaultOptions, { Options, RequiredOptions } from \"./QROptions\";\nimport sanitizeOptions from \"../tools/sanitizeOptions\";\nimport { QRCode } from \"../types\";\nimport qrcode from \"qrcode-generator\";\nimport { PngConfig } from \"canvas\";\n\nexport default class QRCodeStyling {\n  _options: RequiredOptions;\n  _canvas?: QRCanvas;\n  _qr?: QRCode;\n\n  constructor(options?: Partial<Options>) {\n    this._options = options ? sanitizeOptions(mergeDeep(defaultOptions, options) as RequiredOptions) : defaultOptions;\n  }\n\n  public async draw(options?: Partial<Options>): Promise<QRCodeStyling> {\n    this._options = options ? sanitizeOptions(mergeDeep(this._options, options) as RequiredOptions) : this._options;\n\n    if (!this._options.data) {\n      throw new Error(\"Data isn`t defined\");\n    }\n\n    this._qr = qrcode(this._options.qrOptions.typeNumber, this._options.qrOptions.errorCorrectionLevel);\n    this._qr.addData(this._options.data, this._options.qrOptions.mode || getMode(this._options.data));\n    this._qr.make();\n    this._canvas = new QRCanvas(this._options);\n    await this._canvas.drawQR(this._qr);\n    return this;\n  }\n\n  toPNGBuffer(options?: PngConfig): Buffer | undefined {\n    return this._canvas?.getCanvas().toBuffer(\"image/png\", options);\n  }\n}\n","import modes from \"../constants/modes\";\nimport { Mode } from \"../types\";\n\nexport default function getMode(data: string): Mode {\n  switch (true) {\n    case /^[0-9]*$/.test(data):\n      return modes.numeric;\n    case /^[0-9A-Z $%*+\\-./:]*$/.test(data):\n      return modes.alphanumeric;\n    default:\n      return modes.byte;\n  }\n}\n","import { Mode } from \"../types\";\n\ninterface Modes {\n  [key: string]: Mode;\n}\n\nexport default {\n  numeric: \"Numeric\",\n  alphanumeric: \"Alphanumeric\",\n  byte: \"Byte\",\n  kanji: \"Kanji\"\n} as Modes;\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","module.exports = require(\"fs\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"path\");;","module.exports = require(\"querystring\");;","module.exports = require(\"stream\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","module.exports = require(\"zlib\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(984);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"\";"],"sourceRoot":""}